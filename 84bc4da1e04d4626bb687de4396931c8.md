---
jupyter:
  colab:
  kernelspec:
    display_name: Python 3
    name: python3
  language_info:
    name: python
  nbformat: 4
  nbformat_minor: 0
---

::: {.cell .markdown id="Sd41Jgkym4_9"}
# Pre-Model
:::

::: {.cell .markdown id="CHHXZ-5PyvZL"}
\##**Variables Details (1 \~ 4)**

Education

    'Below College'
    'College'
    'Bachelor'
    'Master'
    'Doctor'

EnvironmentSatisfaction

    'Low'
    'Medium'
    'High'
    'Very High'

JobInvolvement

    'Low'
    'Medium'
    'High'
    'Very High'

JobSatisfaction

    'Low'
    'Medium'
    'High'
    'Very High'

PerformanceRating

    'Low'
    'Good'
    'Excellent'
    'Outstanding'

RelationshipSatisfaction

    'Low'
    'Medium'
    'High'
    'Very High'

WorkLifeBalance

    'Bad'
    'Good'
    'Better'
    'Best'
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="2XJi2SQIOdvi" outputId="580c15d3-b225-420f-be90-89158cb57e76"}
``` python
# import required packages
%matplotlib inline
import numpy as np
import pandas as pd
import statsmodels.api as sm
from sklearn import preprocessing
from sklearn.decomposition import PCA
from sklearn.preprocessing import StandardScaler
from sklearn.model_selection import train_test_split
import matplotlib.pylab as plt
import seaborn as sns
from sklearn.tree import DecisionTreeClassifier
from sklearn.ensemble import RandomForestClassifier
from sklearn.linear_model import LogisticRegression
from sklearn.neighbors import KNeighborsClassifier
from sklearn.naive_bayes import GaussianNB
from sklearn.neural_network import MLPClassifier
from sklearn.metrics import accuracy_score
import math
from sklearn.metrics import *
!pip install -U dmba;
from dmba import regressionSummary
from sklearn.neural_network import MLPRegressor
```

::: {.output .stream .stdout}
    Collecting dmba
      Downloading dmba-0.2.4-py3-none-any.whl (11.8 MB)
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 11.8/11.8 MB 68.7 MB/s eta 0:00:00
    ent already satisfied: graphviz in /usr/local/lib/python3.10/dist-packages (from dmba) (0.20.1)
    Requirement already satisfied: matplotlib in /usr/local/lib/python3.10/dist-packages (from dmba) (3.7.1)
    Requirement already satisfied: numpy in /usr/local/lib/python3.10/dist-packages (from dmba) (1.23.5)
    Requirement already satisfied: pandas in /usr/local/lib/python3.10/dist-packages (from dmba) (1.5.3)
    Requirement already satisfied: scikit-learn in /usr/local/lib/python3.10/dist-packages (from dmba) (1.2.2)
    Requirement already satisfied: scipy in /usr/local/lib/python3.10/dist-packages (from dmba) (1.11.3)
    Requirement already satisfied: contourpy>=1.0.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib->dmba) (1.2.0)
    Requirement already satisfied: cycler>=0.10 in /usr/local/lib/python3.10/dist-packages (from matplotlib->dmba) (0.12.1)
    Requirement already satisfied: fonttools>=4.22.0 in /usr/local/lib/python3.10/dist-packages (from matplotlib->dmba) (4.44.3)
    Requirement already satisfied: kiwisolver>=1.0.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib->dmba) (1.4.5)
    Requirement already satisfied: packaging>=20.0 in /usr/local/lib/python3.10/dist-packages (from matplotlib->dmba) (23.2)
    Requirement already satisfied: pillow>=6.2.0 in /usr/local/lib/python3.10/dist-packages (from matplotlib->dmba) (9.4.0)
    Requirement already satisfied: pyparsing>=2.3.1 in /usr/local/lib/python3.10/dist-packages (from matplotlib->dmba) (3.1.1)
    Requirement already satisfied: python-dateutil>=2.7 in /usr/local/lib/python3.10/dist-packages (from matplotlib->dmba) (2.8.2)
    Requirement already satisfied: pytz>=2020.1 in /usr/local/lib/python3.10/dist-packages (from pandas->dmba) (2023.3.post1)
    Requirement already satisfied: joblib>=1.1.1 in /usr/local/lib/python3.10/dist-packages (from scikit-learn->dmba) (1.3.2)
    Requirement already satisfied: threadpoolctl>=2.0.0 in /usr/local/lib/python3.10/dist-packages (from scikit-learn->dmba) (3.2.0)
    Requirement already satisfied: six>=1.5 in /usr/local/lib/python3.10/dist-packages (from python-dateutil>=2.7->matplotlib->dmba) (1.16.0)
    Installing collected packages: dmba
    Successfully installed dmba-0.2.4
    Colab environment detected.
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="79k95y2pQL19" outputId="8082433e-e38a-456b-c5d6-b5ea3ddb16c0"}
``` python
# connect to Google Drive and load the data
from google.colab import drive
drive.mount('/content/drive')
IBM = pd.read_csv('/content/drive/My Drive/Colab Data/IBMtrain.csv')
IBM.info()
```

::: {.output .stream .stdout}
    Mounted at /content/drive
    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 1058 entries, 0 to 1057
    Data columns (total 35 columns):
     #   Column                    Non-Null Count  Dtype 
    ---  ------                    --------------  ----- 
     0   Age                       1058 non-null   int64 
     1   Attrition                 1058 non-null   int64 
     2   BusinessTravel            1058 non-null   object
     3   DailyRate                 1058 non-null   int64 
     4   Department                1058 non-null   object
     5   DistanceFromHome          1058 non-null   int64 
     6   Education                 1058 non-null   int64 
     7   EducationField            1058 non-null   object
     8   EmployeeCount             1058 non-null   int64 
     9   EmployeeNumber            1058 non-null   int64 
     10  EnvironmentSatisfaction   1058 non-null   int64 
     11  Gender                    1058 non-null   object
     12  HourlyRate                1058 non-null   int64 
     13  JobInvolvement            1058 non-null   int64 
     14  JobLevel                  1058 non-null   int64 
     15  JobRole                   1058 non-null   object
     16  JobSatisfaction           1058 non-null   int64 
     17  MaritalStatus             1058 non-null   object
     18  MonthlyIncome             1058 non-null   int64 
     19  MonthlyRate               1058 non-null   int64 
     20  NumCompaniesWorked        1058 non-null   int64 
     21  Over18                    1058 non-null   object
     22  OverTime                  1058 non-null   object
     23  PercentSalaryHike         1058 non-null   int64 
     24  PerformanceRating         1058 non-null   int64 
     25  RelationshipSatisfaction  1058 non-null   int64 
     26  StandardHours             1058 non-null   int64 
     27  StockOptionLevel          1058 non-null   int64 
     28  TotalWorkingYears         1058 non-null   int64 
     29  TrainingTimesLastYear     1058 non-null   int64 
     30  WorkLifeBalance           1058 non-null   int64 
     31  YearsAtCompany            1058 non-null   int64 
     32  YearsInCurrentRole        1058 non-null   int64 
     33  YearsSinceLastPromotion   1058 non-null   int64 
     34  YearsWithCurrManager      1058 non-null   int64 
    dtypes: int64(27), object(8)
    memory usage: 289.4+ KB
:::
:::

::: {.cell .markdown id="3PijjRhttoyk"}
## Dataset Overview
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="HyF-Bw2c0tkK" outputId="809ce149-01da-481d-c312-59df68dcefa3"}
``` python
# shape of dataframe
IBM.shape
```

::: {.output .execute_result execution_count="4"}
    (1058, 35)
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":325}" id="5xiquwnsZqs-" outputId="133b5585-bc78-48c5-f69c-0e666fe14e67"}
``` python
IBM.head(5)
```

::: {.output .execute_result execution_count="5"}
```{=html}

  <div id="df-b1daced2-839c-48ef-8bad-6032d9ec30de" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Attrition</th>
      <th>BusinessTravel</th>
      <th>DailyRate</th>
      <th>Department</th>
      <th>DistanceFromHome</th>
      <th>Education</th>
      <th>EducationField</th>
      <th>EmployeeCount</th>
      <th>EmployeeNumber</th>
      <th>...</th>
      <th>RelationshipSatisfaction</th>
      <th>StandardHours</th>
      <th>StockOptionLevel</th>
      <th>TotalWorkingYears</th>
      <th>TrainingTimesLastYear</th>
      <th>WorkLifeBalance</th>
      <th>YearsAtCompany</th>
      <th>YearsInCurrentRole</th>
      <th>YearsSinceLastPromotion</th>
      <th>YearsWithCurrManager</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>41</td>
      <td>1</td>
      <td>Travel_Rarely</td>
      <td>1102</td>
      <td>Sales</td>
      <td>1</td>
      <td>2</td>
      <td>Life Sciences</td>
      <td>1</td>
      <td>1</td>
      <td>...</td>
      <td>1</td>
      <td>80</td>
      <td>0</td>
      <td>8</td>
      <td>0</td>
      <td>1</td>
      <td>6</td>
      <td>4</td>
      <td>0</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>49</td>
      <td>0</td>
      <td>Travel_Frequently</td>
      <td>279</td>
      <td>Research &amp; Development</td>
      <td>8</td>
      <td>1</td>
      <td>Life Sciences</td>
      <td>1</td>
      <td>2</td>
      <td>...</td>
      <td>4</td>
      <td>80</td>
      <td>1</td>
      <td>10</td>
      <td>3</td>
      <td>3</td>
      <td>10</td>
      <td>7</td>
      <td>1</td>
      <td>7</td>
    </tr>
    <tr>
      <th>2</th>
      <td>37</td>
      <td>1</td>
      <td>Travel_Rarely</td>
      <td>1373</td>
      <td>Research &amp; Development</td>
      <td>2</td>
      <td>2</td>
      <td>Other</td>
      <td>1</td>
      <td>4</td>
      <td>...</td>
      <td>2</td>
      <td>80</td>
      <td>0</td>
      <td>7</td>
      <td>3</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>33</td>
      <td>0</td>
      <td>Travel_Frequently</td>
      <td>1392</td>
      <td>Research &amp; Development</td>
      <td>3</td>
      <td>4</td>
      <td>Life Sciences</td>
      <td>1</td>
      <td>5</td>
      <td>...</td>
      <td>3</td>
      <td>80</td>
      <td>0</td>
      <td>8</td>
      <td>3</td>
      <td>3</td>
      <td>8</td>
      <td>7</td>
      <td>3</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>27</td>
      <td>0</td>
      <td>Travel_Rarely</td>
      <td>591</td>
      <td>Research &amp; Development</td>
      <td>2</td>
      <td>1</td>
      <td>Medical</td>
      <td>1</td>
      <td>7</td>
      <td>...</td>
      <td>4</td>
      <td>80</td>
      <td>1</td>
      <td>6</td>
      <td>3</td>
      <td>3</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 35 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-b1daced2-839c-48ef-8bad-6032d9ec30de')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-b1daced2-839c-48ef-8bad-6032d9ec30de button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-b1daced2-839c-48ef-8bad-6032d9ec30de');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-e4fc1df9-052e-430e-a5aa-c942cdf6b835">
  <button class="colab-df-quickchart" onclick="quickchart('df-e4fc1df9-052e-430e-a5aa-c942cdf6b835')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-e4fc1df9-052e-430e-a5aa-c942cdf6b835 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>
```
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="Y7P7EzTLl3Y_" outputId="ca42d606-a59d-46a9-fb57-68ad8916292d"}
``` python
IBM.columns
```

::: {.output .execute_result execution_count="6"}
    Index(['Age', 'Attrition', 'BusinessTravel', 'DailyRate', 'Department',
           'DistanceFromHome', 'Education', 'EducationField', 'EmployeeCount',
           'EmployeeNumber', 'EnvironmentSatisfaction', 'Gender', 'HourlyRate',
           'JobInvolvement', 'JobLevel', 'JobRole', 'JobSatisfaction',
           'MaritalStatus', 'MonthlyIncome', 'MonthlyRate', 'NumCompaniesWorked',
           'Over18', 'OverTime', 'PercentSalaryHike', 'PerformanceRating',
           'RelationshipSatisfaction', 'StandardHours', 'StockOptionLevel',
           'TotalWorkingYears', 'TrainingTimesLastYear', 'WorkLifeBalance',
           'YearsAtCompany', 'YearsInCurrentRole', 'YearsSinceLastPromotion',
           'YearsWithCurrManager'],
          dtype='object')
:::
:::

::: {.cell .markdown id="hcs4tOOettZY"}
## Naive Rule
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="-S_mcODyVyi3" outputId="a59a1d36-633c-4ea2-b80a-e96e81c5d23d"}
``` python
# Calculate the overall attrition rate
total_attritions = IBM['Attrition'].sum()
total_employees = IBM['Attrition'].count()

overall_attrition_rate = total_attritions / total_employees
print("The overall_attrition_rate is", overall_attrition_rate)

retention_rate = 1 - overall_attrition_rate
print("The overall retention rate is", retention_rate)
```

::: {.output .stream .stdout}
    The overall_attrition_rate is 0.16918714555765596
    The overall retention rate is 0.8308128544423441
:::
:::

::: {.cell .markdown id="XrD8nLESu6cI"}
## Initial Visualizations
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="fIHt-NKKuTRV" outputId="3c3c9648-4cff-4a5c-bb40-b9a0b962f6a9"}
``` python
# Find the department with the highest attrition rate
unique_departments = IBM['Department'].unique()
unique_education = IBM['EducationField'].unique()

# Group by 'Department' and calculate counts
department_group = IBM.groupby('Department')['Attrition'].agg(['count', 'sum'])

# Calculate attrition rate as the ratio of sum (number of attritions) to count (total employees)
department_group['attrition_rate'] = department_group['sum'] / department_group['count']

# Find the department with the highest attrition rate
highest_attrition_department = department_group['attrition_rate'].idxmax()
highest_attrition_rate = department_group['attrition_rate'].max()
highest_attrition_department, highest_attrition_rate
```

::: {.output .execute_result execution_count="8"}
    ('Sales', 0.20689655172413793)
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":564}" id="7VeCPnRdWS9e" outputId="c8001e8a-06d0-484e-cd44-3ae6dd1b03b3"}
``` python
# Attrition Rate by Department with Overall Average
# Extracting department names and their corresponding attrition rates
departments = department_group.index
attrition_rates = department_group['attrition_rate']

# Plotting the attrition rates of each department
plt.figure(figsize=(10, 6))
plt.bar(departments, attrition_rates, color='skyblue', label='Department Attrition Rate')

# Adding a line for the overall attrition rate
plt.axhline(y=overall_attrition_rate, color='r', linestyle='-', label=f'Overall Attrition Rate ({overall_attrition_rate:.2%})')

# Adding labels and title
plt.xlabel('Department')
plt.ylabel('Attrition Rate')
plt.title('Attrition Rate by Department with Overall Average')
plt.xticks(rotation=0)
plt.legend()

# Show the plot
plt.show()
```

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/afc588b34bb0e25cb7c43a287df10edcaa1972a5.png)
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":755}" id="Tbk6w3wDWbYY" outputId="8d9263fc-4940-49a9-b3a4-9fce4c4cecfa"}
``` python
# Attrition Rate by Department and Education Field
# Grouping the data by 'Department' and 'EducationField' and calculating the attrition rate
grouped_data = IBM.groupby(['Department', 'EducationField']).agg(
    Total_employees=('Attrition', 'count'),
    Attrition_count=('Attrition', 'sum')
)
grouped_data['Attrition_rate'] = grouped_data['Attrition_count'] / grouped_data['Total_employees']

# Resetting index for easier plotting
grouped_data_reset = grouped_data.reset_index()

# Creating a heatmap for visualization
plt.figure(figsize=(12, 8))
heatmap_data = grouped_data_reset.pivot("Department", "EducationField", "Attrition_rate")
sns.heatmap(heatmap_data, annot=True, fmt=".2f", cmap="YlGnBu")

plt.title('Attrition Rate by Department and Education Field')
plt.ylabel('Department')
plt.xlabel('Education Field')
plt.show()
```

::: {.output .stream .stderr}
    <ipython-input-10-e503f104d149>:14: FutureWarning: In a future version of pandas all arguments of DataFrame.pivot will be keyword-only.
      heatmap_data = grouped_data_reset.pivot("Department", "EducationField", "Attrition_rate")
:::

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/cfc5cf068e41e343fe87d328d395a447d3f7f248.png)
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":462}" id="XN26RB-SmEzi" outputId="0b0a07f7-392b-4274-a808-6036d0d4c6ab"}
``` python
#Monthly salary distribution by job satisfaction rating
ax = IBM.boxplot(column='MonthlyIncome', by='JobSatisfaction');

# make the figure more readable
ax.set_xlabel('JobSatisfaction');
ax.set_ylabel('MonthlyIncome');

plt.suptitle('');
plt.title( 'monthly salary by job satisfaction rating');
```

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/798e5bfb5458d474e5f5c5472c34e65090b4a116.png)
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":472}" id="qGZe7_NOmMnI" outputId="6d9e0b04-d763-429c-8335-5cc077866f0a"}
``` python
#attrition vs. Job involvement score & Monthly Salary
fig, ax = plt.subplots()

subset0 = IBM.loc[IBM['Attrition']== 0]
ax.scatter(subset0.MonthlyIncome, subset0.JobInvolvement, marker='o', label='0', color='green')

subset1 = IBM.loc[IBM['Attrition']== 1]
ax.scatter(subset1.MonthlyIncome, subset1.JobInvolvement, marker='x', label='1', color='red')

plt.xlabel('MonthlyIncome')  # set x-axis label
plt.ylabel('JobInvolvement')  # set y-axis label

handles, labels = ax.get_legend_handles_labels()
ax.legend(handles, labels);
plt.title( 'monthly salary by job involvement rating & attrition');
```

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/75058eb8a2655aa8004863edd9be17d6d72bf315.png)
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":629}" id="Zp5WDxlimiff" outputId="c856cb3f-8500-4f12-9829-6f9afac13ab8"}
``` python
#More about the correlation and distribution between monthly income and attrition

#the correlation between MonthlyIncome and Attrition
correlation = IBM['MonthlyIncome'].corr(IBM['Attrition'])
print("Correlation between MonthlyIncome and Attrition:", correlation)

# Create bins for MonthlyIncome
bins = np.linspace(IBM['MonthlyIncome'].min(), IBM['MonthlyIncome'].max(), num=10)

# Create a new column 'IncomeRange' to categorize MonthlyIncome into bins
IBM['IncomeRange'] = pd.cut(IBM['MonthlyIncome'], bins)

# Calculate the mean Attrition for each income range
attrition_by_income_range = IBM.groupby('IncomeRange')['Attrition'].mean()

# Find the income range with the highest average Attrition
max_attrition_range = attrition_by_income_range.idxmax()
print("Income range with the highest relationship with Attrition:", max_attrition_range)

attrition_by_income_range.plot(kind='bar', xlabel='Income Range', ylabel='Average Attrition', title='Attrition by Income Range')
plt.show()
```

::: {.output .stream .stdout}
    Correlation between MonthlyIncome and Attrition: -0.16359969489187468
    Income range with the highest relationship with Attrition: (1009.0, 3119.0]
:::

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/e5561ac2bba0f1da655d6a65b13fda355a08bf57.png)
:::
:::

::: {.cell .markdown id="g6zibYAEvV2b"}
## Data Pre-Processing & PCA {#data-pre-processing--pca}
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":273}" id="n_PpFwE7-9r6" outputId="21e8f29b-3bfb-4b3d-8778-300267b8a9e2"}
``` python
#create dummy variables for categroical variables
dummies_BT = pd.get_dummies(IBM['BusinessTravel'],drop_first=False)
dummies_DP = pd.get_dummies(IBM['Department'],drop_first=False)
dummies_EF = pd.get_dummies(IBM['EducationField'],drop_first=False)
dummies_EF = dummies_EF.rename(columns={'Other': 'EF_Other'})
dummies_JR = pd.get_dummies(IBM['JobRole'],drop_first=False)
dummies_OT = pd.get_dummies(IBM['OverTime'],drop_first=False)
dummies_OT = dummies_OT.rename(columns={'Yes': 'OT_Yes', 'No': 'OT_No'})
dummies_MS = pd.get_dummies(IBM['MaritalStatus'],drop_first=False)
dummies_GD = pd.get_dummies(IBM['Gender'],drop_first=False)

IBM[dummies_BT.columns] = dummies_BT
IBM[dummies_DP.columns] = dummies_DP
IBM[dummies_EF.columns] = dummies_EF
IBM[dummies_JR.columns] = dummies_JR
IBM[dummies_OT.columns] = dummies_OT
IBM[dummies_MS.columns] = dummies_MS
IBM[dummies_GD.columns] = dummies_GD

# We are going to drop these coloumns because we are going to create dummy variables for them
Columns_Drop = ['BusinessTravel','Department','Gender','EducationField','JobRole','OverTime','Over18','OverTime','MaritalStatus','StandardHours','EmployeeCount','EmployeeNumber']
IBM_new = IBM.drop(columns=Columns_Drop)
IBM_new.head()
```

::: {.output .execute_result execution_count="14"}
```{=html}

  <div id="df-137c76ed-678f-45f6-b11a-b04e882568f5" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Attrition</th>
      <th>DailyRate</th>
      <th>DistanceFromHome</th>
      <th>Education</th>
      <th>EnvironmentSatisfaction</th>
      <th>HourlyRate</th>
      <th>JobInvolvement</th>
      <th>JobLevel</th>
      <th>JobSatisfaction</th>
      <th>...</th>
      <th>Research Scientist</th>
      <th>Sales Executive</th>
      <th>Sales Representative</th>
      <th>OT_No</th>
      <th>OT_Yes</th>
      <th>Divorced</th>
      <th>Married</th>
      <th>Single</th>
      <th>Female</th>
      <th>Male</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>41</td>
      <td>1</td>
      <td>1102</td>
      <td>1</td>
      <td>2</td>
      <td>2</td>
      <td>94</td>
      <td>3</td>
      <td>2</td>
      <td>4</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>49</td>
      <td>0</td>
      <td>279</td>
      <td>8</td>
      <td>1</td>
      <td>3</td>
      <td>61</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>37</td>
      <td>1</td>
      <td>1373</td>
      <td>2</td>
      <td>2</td>
      <td>4</td>
      <td>92</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>33</td>
      <td>0</td>
      <td>1392</td>
      <td>3</td>
      <td>4</td>
      <td>4</td>
      <td>56</td>
      <td>3</td>
      <td>1</td>
      <td>3</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>27</td>
      <td>0</td>
      <td>591</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>40</td>
      <td>3</td>
      <td>1</td>
      <td>2</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 51 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-137c76ed-678f-45f6-b11a-b04e882568f5')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-137c76ed-678f-45f6-b11a-b04e882568f5 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-137c76ed-678f-45f6-b11a-b04e882568f5');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-eb16b12c-6e3e-49a4-af66-6bbc16e364d8">
  <button class="colab-df-quickchart" onclick="quickchart('df-eb16b12c-6e3e-49a4-af66-6bbc16e364d8')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-eb16b12c-6e3e-49a4-af66-6bbc16e364d8 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>
```
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":273}" id="rd2nbTtrJJv0" outputId="d3961659-196d-4072-c173-d17a8533f280"}
``` python
# Drop outcome variable before performing PCA

# Step 1: Separate the outcome variable
Attrition = IBM_new["Attrition"]
IBM_Without_Attrition = IBM_new.drop(["Attrition","IncomeRange"], axis=1)
IBM_Without_Attrition.head(5)
```

::: {.output .execute_result execution_count="15"}
```{=html}

  <div id="df-30f3eaca-138b-465b-ad70-e1ac375e0153" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>DailyRate</th>
      <th>DistanceFromHome</th>
      <th>Education</th>
      <th>EnvironmentSatisfaction</th>
      <th>HourlyRate</th>
      <th>JobInvolvement</th>
      <th>JobLevel</th>
      <th>JobSatisfaction</th>
      <th>MonthlyIncome</th>
      <th>...</th>
      <th>Research Scientist</th>
      <th>Sales Executive</th>
      <th>Sales Representative</th>
      <th>OT_No</th>
      <th>OT_Yes</th>
      <th>Divorced</th>
      <th>Married</th>
      <th>Single</th>
      <th>Female</th>
      <th>Male</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>41</td>
      <td>1102</td>
      <td>1</td>
      <td>2</td>
      <td>2</td>
      <td>94</td>
      <td>3</td>
      <td>2</td>
      <td>4</td>
      <td>5993</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>49</td>
      <td>279</td>
      <td>8</td>
      <td>1</td>
      <td>3</td>
      <td>61</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>5130</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>37</td>
      <td>1373</td>
      <td>2</td>
      <td>2</td>
      <td>4</td>
      <td>92</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>2090</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>33</td>
      <td>1392</td>
      <td>3</td>
      <td>4</td>
      <td>4</td>
      <td>56</td>
      <td>3</td>
      <td>1</td>
      <td>3</td>
      <td>2909</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>27</td>
      <td>591</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>40</td>
      <td>3</td>
      <td>1</td>
      <td>2</td>
      <td>3468</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 49 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-30f3eaca-138b-465b-ad70-e1ac375e0153')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-30f3eaca-138b-465b-ad70-e1ac375e0153 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-30f3eaca-138b-465b-ad70-e1ac375e0153');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-6f4866d0-4178-4a98-8348-c937627dc40b">
  <button class="colab-df-quickchart" onclick="quickchart('df-6f4866d0-4178-4a98-8348-c937627dc40b')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-6f4866d0-4178-4a98-8348-c937627dc40b button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>
```
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":1000}" id="EDS05oOK0x6o" outputId="c4eda759-eba8-4deb-8c83-e5e7e0b7ae09"}
``` python
# correlation table for the quantitative variables
# the corr() method creates a new dataframe containing the correlation matrix
IBM_mat = IBM_Without_Attrition.corr()
IBM_mat
```

::: {.output .execute_result execution_count="16"}
```{=html}

  <div id="df-1c03d17a-2637-42b8-9543-81b10e0539df" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>DailyRate</th>
      <th>DistanceFromHome</th>
      <th>Education</th>
      <th>EnvironmentSatisfaction</th>
      <th>HourlyRate</th>
      <th>JobInvolvement</th>
      <th>JobLevel</th>
      <th>JobSatisfaction</th>
      <th>MonthlyIncome</th>
      <th>...</th>
      <th>Research Scientist</th>
      <th>Sales Executive</th>
      <th>Sales Representative</th>
      <th>OT_No</th>
      <th>OT_Yes</th>
      <th>Divorced</th>
      <th>Married</th>
      <th>Single</th>
      <th>Female</th>
      <th>Male</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Age</th>
      <td>1.000000</td>
      <td>0.010507</td>
      <td>-0.022753</td>
      <td>0.180723</td>
      <td>0.029247</td>
      <td>0.005901</td>
      <td>0.044010</td>
      <td>0.506484</td>
      <td>-0.020598</td>
      <td>0.497392</td>
      <td>...</td>
      <td>-0.145827</td>
      <td>-0.008242</td>
      <td>-0.169179</td>
      <td>-0.032743</td>
      <td>0.032743</td>
      <td>0.020696</td>
      <td>0.075764</td>
      <td>-0.098237</td>
      <td>0.030312</td>
      <td>-0.030312</td>
    </tr>
    <tr>
      <th>DailyRate</th>
      <td>0.010507</td>
      <td>1.000000</td>
      <td>0.027120</td>
      <td>-0.039805</td>
      <td>0.023005</td>
      <td>0.038572</td>
      <td>0.058871</td>
      <td>0.003042</td>
      <td>0.026694</td>
      <td>0.008371</td>
      <td>...</td>
      <td>-0.005539</td>
      <td>-0.037100</td>
      <td>0.000616</td>
      <td>-0.004170</td>
      <td>0.004170</td>
      <td>0.019890</td>
      <td>0.053541</td>
      <td>-0.074115</td>
      <td>0.038867</td>
      <td>-0.038867</td>
    </tr>
    <tr>
      <th>DistanceFromHome</th>
      <td>-0.022753</td>
      <td>0.027120</td>
      <td>1.000000</td>
      <td>0.006185</td>
      <td>-0.020197</td>
      <td>0.048494</td>
      <td>0.051250</td>
      <td>-0.024838</td>
      <td>0.003862</td>
      <td>-0.042127</td>
      <td>...</td>
      <td>0.017172</td>
      <td>0.019056</td>
      <td>-0.009165</td>
      <td>-0.038268</td>
      <td>0.038268</td>
      <td>0.008473</td>
      <td>0.013293</td>
      <td>-0.021552</td>
      <td>0.000363</td>
      <td>-0.000363</td>
    </tr>
    <tr>
      <th>Education</th>
      <td>0.180723</td>
      <td>-0.039805</td>
      <td>0.006185</td>
      <td>1.000000</td>
      <td>-0.002332</td>
      <td>0.026237</td>
      <td>0.034317</td>
      <td>0.094922</td>
      <td>0.001611</td>
      <td>0.092533</td>
      <td>...</td>
      <td>-0.018509</td>
      <td>0.042251</td>
      <td>-0.092566</td>
      <td>0.015874</td>
      <td>-0.015874</td>
      <td>0.018069</td>
      <td>-0.044091</td>
      <td>0.030326</td>
      <td>0.037209</td>
      <td>-0.037209</td>
    </tr>
    <tr>
      <th>EnvironmentSatisfaction</th>
      <td>0.029247</td>
      <td>0.023005</td>
      <td>-0.020197</td>
      <td>-0.002332</td>
      <td>1.000000</td>
      <td>-0.064578</td>
      <td>0.012431</td>
      <td>0.016439</td>
      <td>0.006159</td>
      <td>0.001543</td>
      <td>...</td>
      <td>-0.007561</td>
      <td>-0.011163</td>
      <td>0.017733</td>
      <td>-0.084285</td>
      <td>0.084285</td>
      <td>0.011402</td>
      <td>-0.015129</td>
      <td>0.005769</td>
      <td>0.008524</td>
      <td>-0.008524</td>
    </tr>
    <tr>
      <th>HourlyRate</th>
      <td>0.005901</td>
      <td>0.038572</td>
      <td>0.048494</td>
      <td>0.026237</td>
      <td>-0.064578</td>
      <td>1.000000</td>
      <td>0.047156</td>
      <td>-0.021084</td>
      <td>-0.073877</td>
      <td>-0.014148</td>
      <td>...</td>
      <td>0.041495</td>
      <td>-0.018816</td>
      <td>0.001158</td>
      <td>0.012056</td>
      <td>-0.012056</td>
      <td>-0.017808</td>
      <td>0.023847</td>
      <td>-0.009239</td>
      <td>0.007658</td>
      <td>-0.007658</td>
    </tr>
    <tr>
      <th>JobInvolvement</th>
      <td>0.044010</td>
      <td>0.058871</td>
      <td>0.051250</td>
      <td>0.034317</td>
      <td>0.012431</td>
      <td>0.047156</td>
      <td>1.000000</td>
      <td>-0.008003</td>
      <td>-0.029948</td>
      <td>-0.007966</td>
      <td>...</td>
      <td>0.047537</td>
      <td>0.019329</td>
      <td>-0.033954</td>
      <td>0.009853</td>
      <td>-0.009853</td>
      <td>0.030630</td>
      <td>0.048460</td>
      <td>-0.078339</td>
      <td>0.011139</td>
      <td>-0.011139</td>
    </tr>
    <tr>
      <th>JobLevel</th>
      <td>0.506484</td>
      <td>0.003042</td>
      <td>-0.024838</td>
      <td>0.094922</td>
      <td>0.016439</td>
      <td>-0.021084</td>
      <td>-0.008003</td>
      <td>1.000000</td>
      <td>-0.029369</td>
      <td>0.953964</td>
      <td>...</td>
      <td>-0.406849</td>
      <td>0.114520</td>
      <td>-0.216620</td>
      <td>0.014403</td>
      <td>-0.014403</td>
      <td>0.045645</td>
      <td>0.045102</td>
      <td>-0.088186</td>
      <td>0.035909</td>
      <td>-0.035909</td>
    </tr>
    <tr>
      <th>JobSatisfaction</th>
      <td>-0.020598</td>
      <td>0.026694</td>
      <td>0.003862</td>
      <td>0.001611</td>
      <td>0.006159</td>
      <td>-0.073877</td>
      <td>-0.029948</td>
      <td>-0.029369</td>
      <td>1.000000</td>
      <td>-0.030743</td>
      <td>...</td>
      <td>0.014074</td>
      <td>0.002297</td>
      <td>0.001984</td>
      <td>0.005859</td>
      <td>-0.005859</td>
      <td>-0.029333</td>
      <td>-0.004799</td>
      <td>0.031202</td>
      <td>-0.057889</td>
      <td>0.057889</td>
    </tr>
    <tr>
      <th>MonthlyIncome</th>
      <td>0.497392</td>
      <td>0.008371</td>
      <td>-0.042127</td>
      <td>0.092533</td>
      <td>0.001543</td>
      <td>-0.014148</td>
      <td>-0.007966</td>
      <td>0.953964</td>
      <td>-0.030743</td>
      <td>1.000000</td>
      <td>...</td>
      <td>-0.361694</td>
      <td>0.031988</td>
      <td>-0.199998</td>
      <td>0.001231</td>
      <td>-0.001231</td>
      <td>0.040029</td>
      <td>0.057665</td>
      <td>-0.096410</td>
      <td>0.022813</td>
      <td>-0.022813</td>
    </tr>
    <tr>
      <th>MonthlyRate</th>
      <td>0.019262</td>
      <td>-0.040267</td>
      <td>0.027495</td>
      <td>-0.050810</td>
      <td>0.026038</td>
      <td>-0.026110</td>
      <td>-0.015792</td>
      <td>0.024555</td>
      <td>0.015769</td>
      <td>0.016802</td>
      <td>...</td>
      <td>-0.019697</td>
      <td>0.010678</td>
      <td>-0.000703</td>
      <td>0.007457</td>
      <td>-0.007457</td>
      <td>-0.002472</td>
      <td>-0.033365</td>
      <td>0.037341</td>
      <td>0.034170</td>
      <td>-0.034170</td>
    </tr>
    <tr>
      <th>NumCompaniesWorked</th>
      <td>0.303624</td>
      <td>0.028158</td>
      <td>-0.018545</td>
      <td>0.127759</td>
      <td>0.000318</td>
      <td>0.030150</td>
      <td>0.013589</td>
      <td>0.144195</td>
      <td>-0.063714</td>
      <td>0.147337</td>
      <td>...</td>
      <td>-0.069309</td>
      <td>0.005413</td>
      <td>-0.085612</td>
      <td>0.021507</td>
      <td>-0.021507</td>
      <td>0.040065</td>
      <td>-0.015893</td>
      <td>-0.018977</td>
      <td>0.058076</td>
      <td>-0.058076</td>
    </tr>
    <tr>
      <th>PercentSalaryHike</th>
      <td>-0.024856</td>
      <td>0.031179</td>
      <td>0.041835</td>
      <td>-0.026712</td>
      <td>-0.063377</td>
      <td>-0.006855</td>
      <td>-0.028627</td>
      <td>-0.070180</td>
      <td>-0.004865</td>
      <td>-0.060257</td>
      <td>...</td>
      <td>0.045662</td>
      <td>-0.030870</td>
      <td>0.013639</td>
      <td>0.014236</td>
      <td>-0.014236</td>
      <td>-0.022100</td>
      <td>0.003474</td>
      <td>0.016042</td>
      <td>-0.007544</td>
      <td>0.007544</td>
    </tr>
    <tr>
      <th>PerformanceRating</th>
      <td>-0.033426</td>
      <td>0.016809</td>
      <td>0.030428</td>
      <td>-0.043008</td>
      <td>-0.046762</td>
      <td>-0.011632</td>
      <td>-0.015850</td>
      <td>-0.061532</td>
      <td>-0.029179</td>
      <td>-0.058225</td>
      <td>...</td>
      <td>0.031865</td>
      <td>-0.043890</td>
      <td>-0.031564</td>
      <td>-0.005029</td>
      <td>0.005029</td>
      <td>-0.014916</td>
      <td>0.001431</td>
      <td>0.011789</td>
      <td>0.011684</td>
      <td>-0.011684</td>
    </tr>
    <tr>
      <th>RelationshipSatisfaction</th>
      <td>0.052445</td>
      <td>-0.013600</td>
      <td>0.010755</td>
      <td>0.008438</td>
      <td>-0.003999</td>
      <td>-0.012714</td>
      <td>0.049298</td>
      <td>0.026113</td>
      <td>-0.002660</td>
      <td>0.030892</td>
      <td>...</td>
      <td>-0.005490</td>
      <td>-0.009694</td>
      <td>-0.015829</td>
      <td>-0.045568</td>
      <td>0.045568</td>
      <td>0.008469</td>
      <td>-0.054596</td>
      <td>0.049947</td>
      <td>-0.048143</td>
      <td>0.048143</td>
    </tr>
    <tr>
      <th>StockOptionLevel</th>
      <td>0.010683</td>
      <td>0.044321</td>
      <td>0.048544</td>
      <td>-0.005877</td>
      <td>0.021579</td>
      <td>0.021539</td>
      <td>0.043353</td>
      <td>0.019655</td>
      <td>0.023664</td>
      <td>0.012255</td>
      <td>...</td>
      <td>-0.003459</td>
      <td>0.016481</td>
      <td>-0.045831</td>
      <td>-0.014510</td>
      <td>0.014510</td>
      <td>0.476905</td>
      <td>0.207238</td>
      <td>-0.643366</td>
      <td>-0.023126</td>
      <td>0.023126</td>
    </tr>
    <tr>
      <th>TotalWorkingYears</th>
      <td>0.690428</td>
      <td>0.024266</td>
      <td>-0.025465</td>
      <td>0.131213</td>
      <td>0.007392</td>
      <td>-0.017238</td>
      <td>-0.007514</td>
      <td>0.786925</td>
      <td>-0.043132</td>
      <td>0.778177</td>
      <td>...</td>
      <td>-0.247628</td>
      <td>-0.015991</td>
      <td>-0.222974</td>
      <td>0.003319</td>
      <td>-0.003319</td>
      <td>0.033015</td>
      <td>0.049404</td>
      <td>-0.081459</td>
      <td>0.047456</td>
      <td>-0.047456</td>
    </tr>
    <tr>
      <th>TrainingTimesLastYear</th>
      <td>-0.004970</td>
      <td>-0.000817</td>
      <td>-0.005176</td>
      <td>-0.039092</td>
      <td>-0.031968</td>
      <td>-0.017006</td>
      <td>-0.030002</td>
      <td>-0.006301</td>
      <td>0.015052</td>
      <td>0.001079</td>
      <td>...</td>
      <td>-0.037311</td>
      <td>0.006149</td>
      <td>0.042656</td>
      <td>0.081890</td>
      <td>-0.081890</td>
      <td>0.022141</td>
      <td>-0.052650</td>
      <td>0.035711</td>
      <td>0.050128</td>
      <td>-0.050128</td>
    </tr>
    <tr>
      <th>WorkLifeBalance</th>
      <td>-0.026016</td>
      <td>-0.057479</td>
      <td>-0.051469</td>
      <td>0.010054</td>
      <td>0.017335</td>
      <td>-0.001058</td>
      <td>-0.029776</td>
      <td>0.037285</td>
      <td>-0.063735</td>
      <td>0.025149</td>
      <td>...</td>
      <td>-0.051359</td>
      <td>0.044651</td>
      <td>0.062867</td>
      <td>0.060257</td>
      <td>-0.060257</td>
      <td>-0.015330</td>
      <td>-0.041377</td>
      <td>0.057240</td>
      <td>0.001349</td>
      <td>-0.001349</td>
    </tr>
    <tr>
      <th>YearsAtCompany</th>
      <td>0.313454</td>
      <td>-0.047141</td>
      <td>-0.028687</td>
      <td>0.055830</td>
      <td>0.002463</td>
      <td>-0.022893</td>
      <td>-0.011757</td>
      <td>0.546310</td>
      <td>-0.029912</td>
      <td>0.527952</td>
      <td>...</td>
      <td>-0.173952</td>
      <td>0.042632</td>
      <td>-0.170926</td>
      <td>0.003000</td>
      <td>-0.003000</td>
      <td>0.023076</td>
      <td>0.038246</td>
      <td>-0.060848</td>
      <td>0.029244</td>
      <td>-0.029244</td>
    </tr>
    <tr>
      <th>YearsInCurrentRole</th>
      <td>0.210148</td>
      <td>-0.001487</td>
      <td>-0.005367</td>
      <td>0.070081</td>
      <td>0.027112</td>
      <td>-0.035471</td>
      <td>0.009100</td>
      <td>0.410976</td>
      <td>-0.022945</td>
      <td>0.386686</td>
      <td>...</td>
      <td>-0.149562</td>
      <td>0.085593</td>
      <td>-0.164368</td>
      <td>0.020786</td>
      <td>-0.020786</td>
      <td>-0.005060</td>
      <td>0.057925</td>
      <td>-0.056492</td>
      <td>0.041258</td>
      <td>-0.041258</td>
    </tr>
    <tr>
      <th>YearsSinceLastPromotion</th>
      <td>0.211967</td>
      <td>-0.047469</td>
      <td>-0.009304</td>
      <td>0.064578</td>
      <td>0.022197</td>
      <td>-0.049503</td>
      <td>-0.017878</td>
      <td>0.361694</td>
      <td>-0.030463</td>
      <td>0.354188</td>
      <td>...</td>
      <td>-0.113483</td>
      <td>0.045370</td>
      <td>-0.098913</td>
      <td>0.016191</td>
      <td>-0.016191</td>
      <td>0.001945</td>
      <td>0.038330</td>
      <td>-0.042100</td>
      <td>0.035255</td>
      <td>-0.035255</td>
    </tr>
    <tr>
      <th>YearsWithCurrManager</th>
      <td>0.194128</td>
      <td>-0.038338</td>
      <td>-0.005352</td>
      <td>0.080093</td>
      <td>0.002739</td>
      <td>-0.031806</td>
      <td>0.032704</td>
      <td>0.380084</td>
      <td>-0.049086</td>
      <td>0.347605</td>
      <td>...</td>
      <td>-0.150796</td>
      <td>0.102167</td>
      <td>-0.175768</td>
      <td>0.020735</td>
      <td>-0.020735</td>
      <td>0.006544</td>
      <td>0.015767</td>
      <td>-0.022438</td>
      <td>0.038134</td>
      <td>-0.038134</td>
    </tr>
    <tr>
      <th>Non-Travel</th>
      <td>-0.029651</td>
      <td>0.009229</td>
      <td>0.043424</td>
      <td>-0.003207</td>
      <td>-0.000732</td>
      <td>-0.005073</td>
      <td>-0.052892</td>
      <td>0.003563</td>
      <td>0.022158</td>
      <td>-0.006169</td>
      <td>...</td>
      <td>-0.044037</td>
      <td>0.049527</td>
      <td>-0.039467</td>
      <td>0.027963</td>
      <td>-0.027963</td>
      <td>0.041240</td>
      <td>-0.043757</td>
      <td>0.009319</td>
      <td>-0.052806</td>
      <td>0.052806</td>
    </tr>
    <tr>
      <th>Travel_Frequently</th>
      <td>-0.016635</td>
      <td>-0.021807</td>
      <td>0.039115</td>
      <td>-0.009739</td>
      <td>-0.035235</td>
      <td>-0.020241</td>
      <td>-0.003851</td>
      <td>-0.016001</td>
      <td>-0.010083</td>
      <td>-0.028191</td>
      <td>...</td>
      <td>-0.014675</td>
      <td>0.006053</td>
      <td>0.081542</td>
      <td>-0.007983</td>
      <td>0.007983</td>
      <td>0.017705</td>
      <td>-0.033279</td>
      <td>0.019265</td>
      <td>0.054049</td>
      <td>-0.054049</td>
    </tr>
    <tr>
      <th>Travel_Rarely</th>
      <td>0.034025</td>
      <td>0.012800</td>
      <td>-0.062616</td>
      <td>0.010562</td>
      <td>0.031025</td>
      <td>0.020898</td>
      <td>0.038310</td>
      <td>0.011514</td>
      <td>-0.005911</td>
      <td>0.028514</td>
      <td>...</td>
      <td>0.041837</td>
      <td>-0.037994</td>
      <td>-0.044583</td>
      <td>-0.011569</td>
      <td>0.011569</td>
      <td>-0.042614</td>
      <td>0.057778</td>
      <td>-0.022860</td>
      <td>-0.011933</td>
      <td>0.011933</td>
    </tr>
    <tr>
      <th>Human Resources</th>
      <td>-0.004645</td>
      <td>-0.003016</td>
      <td>-0.020085</td>
      <td>-0.002046</td>
      <td>-0.028043</td>
      <td>-0.031480</td>
      <td>0.023304</td>
      <td>-0.083823</td>
      <td>-0.059263</td>
      <td>-0.072518</td>
      <td>...</td>
      <td>-0.086020</td>
      <td>-0.090535</td>
      <td>-0.041141</td>
      <td>0.021394</td>
      <td>-0.021394</td>
      <td>0.001871</td>
      <td>0.032626</td>
      <td>-0.036027</td>
      <td>-0.039535</td>
      <td>0.039535</td>
    </tr>
    <tr>
      <th>Research &amp; Development</th>
      <td>0.010607</td>
      <td>0.036728</td>
      <td>0.002049</td>
      <td>-0.006187</td>
      <td>0.015410</td>
      <td>0.012968</td>
      <td>0.003390</td>
      <td>-0.110169</td>
      <td>0.013732</td>
      <td>-0.064809</td>
      <td>...</td>
      <td>0.359344</td>
      <td>-0.742641</td>
      <td>-0.337473</td>
      <td>-0.015816</td>
      <td>0.015816</td>
      <td>0.055483</td>
      <td>-0.038000</td>
      <td>-0.009439</td>
      <td>-0.013012</td>
      <td>0.013012</td>
    </tr>
    <tr>
      <th>Sales</th>
      <td>-0.030609</td>
      <td>-0.032694</td>
      <td>0.006903</td>
      <td>-0.000812</td>
      <td>-0.010068</td>
      <td>-0.000135</td>
      <td>-0.012221</td>
      <td>0.107070</td>
      <td>0.007280</td>
      <td>0.054568</td>
      <td>...</td>
      <td>-0.330833</td>
      <td>0.806642</td>
      <td>0.366556</td>
      <td>0.007099</td>
      <td>-0.007099</td>
      <td>-0.058676</td>
      <td>0.025312</td>
      <td>0.025648</td>
      <td>0.029010</td>
      <td>-0.029010</td>
    </tr>
    <tr>
      <th>Life Sciences</th>
      <td>-0.005985</td>
      <td>0.017522</td>
      <td>-0.037159</td>
      <td>0.020020</td>
      <td>-0.027636</td>
      <td>0.032361</td>
      <td>-0.042082</td>
      <td>-0.029686</td>
      <td>0.056037</td>
      <td>-0.024045</td>
      <td>...</td>
      <td>0.070803</td>
      <td>-0.109560</td>
      <td>-0.058222</td>
      <td>0.006407</td>
      <td>-0.006407</td>
      <td>-0.007899</td>
      <td>-0.016306</td>
      <td>0.024214</td>
      <td>0.001953</td>
      <td>-0.001953</td>
    </tr>
    <tr>
      <th>Marketing</th>
      <td>0.045052</td>
      <td>-0.072119</td>
      <td>0.024542</td>
      <td>0.071071</td>
      <td>0.008275</td>
      <td>0.008226</td>
      <td>0.008640</td>
      <td>0.080574</td>
      <td>-0.033363</td>
      <td>0.053921</td>
      <td>...</td>
      <td>-0.181793</td>
      <td>0.459506</td>
      <td>0.160059</td>
      <td>-0.023469</td>
      <td>0.023469</td>
      <td>0.000666</td>
      <td>0.026808</td>
      <td>-0.028826</td>
      <td>0.020988</td>
      <td>-0.020988</td>
    </tr>
    <tr>
      <th>Medical</th>
      <td>0.009240</td>
      <td>0.047522</td>
      <td>0.057416</td>
      <td>-0.075350</td>
      <td>-0.015276</td>
      <td>-0.019524</td>
      <td>0.036816</td>
      <td>-0.007082</td>
      <td>-0.032063</td>
      <td>0.005068</td>
      <td>...</td>
      <td>0.057147</td>
      <td>-0.129994</td>
      <td>-0.072517</td>
      <td>0.016886</td>
      <td>-0.016886</td>
      <td>0.026803</td>
      <td>-0.002985</td>
      <td>-0.020750</td>
      <td>0.005732</td>
      <td>-0.005732</td>
    </tr>
    <tr>
      <th>EF_Other</th>
      <td>-0.025088</td>
      <td>-0.033706</td>
      <td>-0.019331</td>
      <td>0.068472</td>
      <td>0.037526</td>
      <td>-0.036896</td>
      <td>-0.002907</td>
      <td>-0.004908</td>
      <td>-0.000829</td>
      <td>-0.017272</td>
      <td>...</td>
      <td>-0.009576</td>
      <td>-0.029244</td>
      <td>-0.040432</td>
      <td>-0.007986</td>
      <td>0.007986</td>
      <td>-0.004857</td>
      <td>-0.015566</td>
      <td>0.020723</td>
      <td>-0.053733</td>
      <td>0.053733</td>
    </tr>
    <tr>
      <th>Technical Degree</th>
      <td>-0.043854</td>
      <td>0.015651</td>
      <td>-0.032310</td>
      <td>-0.055492</td>
      <td>0.025857</td>
      <td>0.025950</td>
      <td>-0.008292</td>
      <td>-0.042613</td>
      <td>0.000135</td>
      <td>-0.038774</td>
      <td>...</td>
      <td>0.021153</td>
      <td>-0.064030</td>
      <td>0.082938</td>
      <td>-0.001042</td>
      <td>0.001042</td>
      <td>-0.031012</td>
      <td>-0.007308</td>
      <td>0.035341</td>
      <td>0.015079</td>
      <td>-0.015079</td>
    </tr>
    <tr>
      <th>Healthcare Representative</th>
      <td>0.093189</td>
      <td>0.054250</td>
      <td>0.036589</td>
      <td>0.028706</td>
      <td>0.022826</td>
      <td>0.039316</td>
      <td>-0.028558</td>
      <td>0.114541</td>
      <td>0.021839</td>
      <td>0.071247</td>
      <td>...</td>
      <td>-0.151667</td>
      <td>-0.159628</td>
      <td>-0.072539</td>
      <td>0.011576</td>
      <td>-0.011576</td>
      <td>0.023400</td>
      <td>-0.004094</td>
      <td>-0.016547</td>
      <td>0.017852</td>
      <td>-0.017852</td>
    </tr>
    <tr>
      <th>Laboratory Technician</th>
      <td>-0.147077</td>
      <td>-0.004463</td>
      <td>0.011103</td>
      <td>-0.041385</td>
      <td>-0.029382</td>
      <td>-0.003044</td>
      <td>-0.044234</td>
      <td>-0.344041</td>
      <td>0.027085</td>
      <td>-0.325450</td>
      <td>...</td>
      <td>-0.234075</td>
      <td>-0.246362</td>
      <td>-0.111952</td>
      <td>0.052042</td>
      <td>-0.052042</td>
      <td>-0.017672</td>
      <td>-0.002242</td>
      <td>0.018114</td>
      <td>-0.069428</td>
      <td>0.069428</td>
    </tr>
    <tr>
      <th>Manager</th>
      <td>0.290002</td>
      <td>0.011688</td>
      <td>-0.053369</td>
      <td>0.001945</td>
      <td>0.018760</td>
      <td>0.008169</td>
      <td>-0.006340</td>
      <td>0.553409</td>
      <td>-0.033275</td>
      <td>0.617649</td>
      <td>...</td>
      <td>-0.143040</td>
      <td>-0.150548</td>
      <td>-0.068413</td>
      <td>-0.000607</td>
      <td>0.000607</td>
      <td>-0.000599</td>
      <td>0.075027</td>
      <td>-0.078478</td>
      <td>0.038655</td>
      <td>-0.038655</td>
    </tr>
    <tr>
      <th>Manufacturing Director</th>
      <td>0.048337</td>
      <td>0.011210</td>
      <td>0.006368</td>
      <td>0.005915</td>
      <td>0.082486</td>
      <td>-0.035626</td>
      <td>-0.017288</td>
      <td>0.116707</td>
      <td>-0.011929</td>
      <td>0.056332</td>
      <td>...</td>
      <td>-0.168903</td>
      <td>-0.177769</td>
      <td>-0.080782</td>
      <td>0.014148</td>
      <td>-0.014148</td>
      <td>0.026313</td>
      <td>0.006783</td>
      <td>-0.030600</td>
      <td>0.049028</td>
      <td>-0.049028</td>
    </tr>
    <tr>
      <th>Research Director</th>
      <td>0.174359</td>
      <td>-0.007625</td>
      <td>-0.049397</td>
      <td>0.072215</td>
      <td>-0.070671</td>
      <td>-0.021375</td>
      <td>0.035941</td>
      <td>0.419336</td>
      <td>-0.005363</td>
      <td>0.489656</td>
      <td>...</td>
      <td>-0.125632</td>
      <td>-0.132227</td>
      <td>-0.060087</td>
      <td>-0.000084</td>
      <td>0.000084</td>
      <td>0.055747</td>
      <td>-0.009658</td>
      <td>-0.039522</td>
      <td>-0.005452</td>
      <td>0.005452</td>
    </tr>
    <tr>
      <th>Research Scientist</th>
      <td>-0.145827</td>
      <td>-0.005539</td>
      <td>0.017172</td>
      <td>-0.018509</td>
      <td>-0.007561</td>
      <td>0.041495</td>
      <td>0.047537</td>
      <td>-0.406849</td>
      <td>0.014074</td>
      <td>-0.361694</td>
      <td>...</td>
      <td>1.000000</td>
      <td>-0.266864</td>
      <td>-0.121269</td>
      <td>-0.082454</td>
      <td>0.082454</td>
      <td>0.005888</td>
      <td>-0.065688</td>
      <td>0.063929</td>
      <td>-0.002836</td>
      <td>0.002836</td>
    </tr>
    <tr>
      <th>Sales Executive</th>
      <td>-0.008242</td>
      <td>-0.037100</td>
      <td>0.019056</td>
      <td>0.042251</td>
      <td>-0.011163</td>
      <td>-0.018816</td>
      <td>0.019329</td>
      <td>0.114520</td>
      <td>0.002297</td>
      <td>0.031988</td>
      <td>...</td>
      <td>-0.266864</td>
      <td>1.000000</td>
      <td>-0.127634</td>
      <td>0.006641</td>
      <td>-0.006641</td>
      <td>-0.032992</td>
      <td>0.019581</td>
      <td>0.008789</td>
      <td>-0.000210</td>
      <td>0.000210</td>
    </tr>
    <tr>
      <th>Sales Representative</th>
      <td>-0.169179</td>
      <td>0.000616</td>
      <td>-0.009165</td>
      <td>-0.092566</td>
      <td>0.017733</td>
      <td>0.001158</td>
      <td>-0.033954</td>
      <td>-0.216620</td>
      <td>0.001984</td>
      <td>-0.199998</td>
      <td>...</td>
      <td>-0.121269</td>
      <td>-0.127634</td>
      <td>1.000000</td>
      <td>-0.001557</td>
      <td>0.001557</td>
      <td>-0.042179</td>
      <td>-0.020390</td>
      <td>0.059072</td>
      <td>0.025195</td>
      <td>-0.025195</td>
    </tr>
    <tr>
      <th>OT_No</th>
      <td>-0.032743</td>
      <td>-0.004170</td>
      <td>-0.038268</td>
      <td>0.015874</td>
      <td>-0.084285</td>
      <td>0.012056</td>
      <td>0.009853</td>
      <td>0.014403</td>
      <td>0.005859</td>
      <td>0.001231</td>
      <td>...</td>
      <td>-0.082454</td>
      <td>0.006641</td>
      <td>-0.001557</td>
      <td>1.000000</td>
      <td>-1.000000</td>
      <td>-0.013779</td>
      <td>-0.001515</td>
      <td>0.013878</td>
      <td>-0.037655</td>
      <td>0.037655</td>
    </tr>
    <tr>
      <th>OT_Yes</th>
      <td>0.032743</td>
      <td>0.004170</td>
      <td>0.038268</td>
      <td>-0.015874</td>
      <td>0.084285</td>
      <td>-0.012056</td>
      <td>-0.009853</td>
      <td>-0.014403</td>
      <td>-0.005859</td>
      <td>-0.001231</td>
      <td>...</td>
      <td>0.082454</td>
      <td>-0.006641</td>
      <td>0.001557</td>
      <td>-1.000000</td>
      <td>1.000000</td>
      <td>0.013779</td>
      <td>0.001515</td>
      <td>-0.013878</td>
      <td>0.037655</td>
      <td>-0.037655</td>
    </tr>
    <tr>
      <th>Divorced</th>
      <td>0.020696</td>
      <td>0.019890</td>
      <td>0.008473</td>
      <td>0.018069</td>
      <td>0.011402</td>
      <td>-0.017808</td>
      <td>0.030630</td>
      <td>0.045645</td>
      <td>-0.029333</td>
      <td>0.040029</td>
      <td>...</td>
      <td>0.005888</td>
      <td>-0.032992</td>
      <td>-0.042179</td>
      <td>-0.013779</td>
      <td>0.013779</td>
      <td>1.000000</td>
      <td>-0.481314</td>
      <td>-0.384531</td>
      <td>-0.046534</td>
      <td>0.046534</td>
    </tr>
    <tr>
      <th>Married</th>
      <td>0.075764</td>
      <td>0.053541</td>
      <td>0.013293</td>
      <td>-0.044091</td>
      <td>-0.015129</td>
      <td>0.023847</td>
      <td>0.048460</td>
      <td>0.045102</td>
      <td>-0.004799</td>
      <td>0.057665</td>
      <td>...</td>
      <td>-0.065688</td>
      <td>0.019581</td>
      <td>-0.020390</td>
      <td>-0.001515</td>
      <td>0.001515</td>
      <td>-0.481314</td>
      <td>1.000000</td>
      <td>-0.624072</td>
      <td>-0.019687</td>
      <td>0.019687</td>
    </tr>
    <tr>
      <th>Single</th>
      <td>-0.098237</td>
      <td>-0.074115</td>
      <td>-0.021552</td>
      <td>0.030326</td>
      <td>0.005769</td>
      <td>-0.009239</td>
      <td>-0.078339</td>
      <td>-0.088186</td>
      <td>0.031202</td>
      <td>-0.096410</td>
      <td>...</td>
      <td>0.063929</td>
      <td>0.008789</td>
      <td>0.059072</td>
      <td>0.013878</td>
      <td>-0.013878</td>
      <td>-0.384531</td>
      <td>-0.624072</td>
      <td>1.000000</td>
      <td>0.062214</td>
      <td>-0.062214</td>
    </tr>
    <tr>
      <th>Female</th>
      <td>0.030312</td>
      <td>0.038867</td>
      <td>0.000363</td>
      <td>0.037209</td>
      <td>0.008524</td>
      <td>0.007658</td>
      <td>0.011139</td>
      <td>0.035909</td>
      <td>-0.057889</td>
      <td>0.022813</td>
      <td>...</td>
      <td>-0.002836</td>
      <td>-0.000210</td>
      <td>0.025195</td>
      <td>-0.037655</td>
      <td>0.037655</td>
      <td>-0.046534</td>
      <td>-0.019687</td>
      <td>0.062214</td>
      <td>1.000000</td>
      <td>-1.000000</td>
    </tr>
    <tr>
      <th>Male</th>
      <td>-0.030312</td>
      <td>-0.038867</td>
      <td>-0.000363</td>
      <td>-0.037209</td>
      <td>-0.008524</td>
      <td>-0.007658</td>
      <td>-0.011139</td>
      <td>-0.035909</td>
      <td>0.057889</td>
      <td>-0.022813</td>
      <td>...</td>
      <td>0.002836</td>
      <td>0.000210</td>
      <td>-0.025195</td>
      <td>0.037655</td>
      <td>-0.037655</td>
      <td>0.046534</td>
      <td>0.019687</td>
      <td>-0.062214</td>
      <td>-1.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
<p>49 rows × 49 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-1c03d17a-2637-42b8-9543-81b10e0539df')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-1c03d17a-2637-42b8-9543-81b10e0539df button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-1c03d17a-2637-42b8-9543-81b10e0539df');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-2304fcac-fa32-4ef9-ae86-c9fac377f3c8">
  <button class="colab-df-quickchart" onclick="quickchart('df-2304fcac-fa32-4ef9-ae86-c9fac377f3c8')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-2304fcac-fa32-4ef9-ae86-c9fac377f3c8 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>
```
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":941}" id="bUaTyyuwNYJO" outputId="e7e02a09-d989-46a7-af93-59ab30ae3daf"}
``` python
#graph the correlation of each variables
plt.figure(figsize=(32,14))
sns.heatmap(np.absolute(IBM_mat), annot=True, fmt=".1f", vmin=0, vmax=1, cmap="gray_r"); #only thing changed is the axis and grey scale
```

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/a67b39e841dcf6823e1f72ae400128e082c60c58.png)
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":1000}" id="uNnupfCrfXOD" outputId="fe440225-fcbd-47c0-f304-a61b4a531f63"}
``` python
# Scaling Standardization (0 mean, unit variance) is done via the sklearn.preprocessing scale() function

pcs = PCA()
pcs.fit(preprocessing.scale(IBM_Without_Attrition))

# view the importance of principal components
pcsSummary_df = pd.DataFrame({
            'Proportion of variance': pcs.explained_variance_ratio_,
            'Cumulative proportion': np.cumsum(pcs.explained_variance_ratio_)
            })
pcsSummary_df.round(3)
```

::: {.output .execute_result execution_count="18"}
```{=html}

  <div id="df-ef9bcc72-297f-41e1-8f71-3f70a9952e14" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Proportion of variance</th>
      <th>Cumulative proportion</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.110</td>
      <td>0.110</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.072</td>
      <td>0.183</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.045</td>
      <td>0.228</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.044</td>
      <td>0.272</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.041</td>
      <td>0.313</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.040</td>
      <td>0.353</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.038</td>
      <td>0.390</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.036</td>
      <td>0.426</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.033</td>
      <td>0.459</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.031</td>
      <td>0.491</td>
    </tr>
    <tr>
      <th>10</th>
      <td>0.028</td>
      <td>0.518</td>
    </tr>
    <tr>
      <th>11</th>
      <td>0.026</td>
      <td>0.544</td>
    </tr>
    <tr>
      <th>12</th>
      <td>0.026</td>
      <td>0.570</td>
    </tr>
    <tr>
      <th>13</th>
      <td>0.025</td>
      <td>0.595</td>
    </tr>
    <tr>
      <th>14</th>
      <td>0.025</td>
      <td>0.620</td>
    </tr>
    <tr>
      <th>15</th>
      <td>0.024</td>
      <td>0.644</td>
    </tr>
    <tr>
      <th>16</th>
      <td>0.023</td>
      <td>0.667</td>
    </tr>
    <tr>
      <th>17</th>
      <td>0.023</td>
      <td>0.690</td>
    </tr>
    <tr>
      <th>18</th>
      <td>0.022</td>
      <td>0.712</td>
    </tr>
    <tr>
      <th>19</th>
      <td>0.021</td>
      <td>0.733</td>
    </tr>
    <tr>
      <th>20</th>
      <td>0.021</td>
      <td>0.754</td>
    </tr>
    <tr>
      <th>21</th>
      <td>0.021</td>
      <td>0.774</td>
    </tr>
    <tr>
      <th>22</th>
      <td>0.020</td>
      <td>0.794</td>
    </tr>
    <tr>
      <th>23</th>
      <td>0.019</td>
      <td>0.814</td>
    </tr>
    <tr>
      <th>24</th>
      <td>0.019</td>
      <td>0.833</td>
    </tr>
    <tr>
      <th>25</th>
      <td>0.019</td>
      <td>0.851</td>
    </tr>
    <tr>
      <th>26</th>
      <td>0.018</td>
      <td>0.869</td>
    </tr>
    <tr>
      <th>27</th>
      <td>0.018</td>
      <td>0.887</td>
    </tr>
    <tr>
      <th>28</th>
      <td>0.017</td>
      <td>0.904</td>
    </tr>
    <tr>
      <th>29</th>
      <td>0.016</td>
      <td>0.920</td>
    </tr>
    <tr>
      <th>30</th>
      <td>0.016</td>
      <td>0.936</td>
    </tr>
    <tr>
      <th>31</th>
      <td>0.014</td>
      <td>0.950</td>
    </tr>
    <tr>
      <th>32</th>
      <td>0.011</td>
      <td>0.961</td>
    </tr>
    <tr>
      <th>33</th>
      <td>0.010</td>
      <td>0.971</td>
    </tr>
    <tr>
      <th>34</th>
      <td>0.007</td>
      <td>0.978</td>
    </tr>
    <tr>
      <th>35</th>
      <td>0.005</td>
      <td>0.984</td>
    </tr>
    <tr>
      <th>36</th>
      <td>0.005</td>
      <td>0.988</td>
    </tr>
    <tr>
      <th>37</th>
      <td>0.004</td>
      <td>0.993</td>
    </tr>
    <tr>
      <th>38</th>
      <td>0.003</td>
      <td>0.996</td>
    </tr>
    <tr>
      <th>39</th>
      <td>0.002</td>
      <td>0.998</td>
    </tr>
    <tr>
      <th>40</th>
      <td>0.001</td>
      <td>0.999</td>
    </tr>
    <tr>
      <th>41</th>
      <td>0.001</td>
      <td>0.999</td>
    </tr>
    <tr>
      <th>42</th>
      <td>0.000</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>43</th>
      <td>0.000</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>44</th>
      <td>0.000</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>45</th>
      <td>0.000</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>46</th>
      <td>0.000</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>47</th>
      <td>0.000</td>
      <td>1.000</td>
    </tr>
    <tr>
      <th>48</th>
      <td>0.000</td>
      <td>1.000</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-ef9bcc72-297f-41e1-8f71-3f70a9952e14')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-ef9bcc72-297f-41e1-8f71-3f70a9952e14 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-ef9bcc72-297f-41e1-8f71-3f70a9952e14');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-8d66d81b-43b7-4917-b3aa-1d72020db83e">
  <button class="colab-df-quickchart" onclick="quickchart('df-8d66d81b-43b7-4917-b3aa-1d72020db83e')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-8d66d81b-43b7-4917-b3aa-1d72020db83e button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>
```
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":599}" id="w_1v2QeRfnBd" outputId="0cb87a84-9ed8-4c83-b857-e140159fefff"}
``` python
# Initial Component matrix (correlations)
var = list(IBM_Without_Attrition.columns)

plt.figure(figsize=(32,10))
sns.heatmap(np.absolute(pd.DataFrame(pcs.components_.transpose(), index=[var]).round(2)), annot=True, fmt=".1f", vmin=0.3, vmax=1, cmap="gray_r"); #only thing changed is the axis and grey scale
```

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/a02dc0ae5b5c5cbeb42083d6eb27cac45392dd13.png)
:::
:::

::: {.cell .markdown id="aAALa8QcM0vR"}
Variable 1: Work Experience Variable 2:
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="01yRGwSPHeQH" outputId="420eb758-baef-4d94-dd4c-1fba96df0eca"}
``` python
#Eigenvalues are given by the PCA explained_variance_ method
eig=pcs.explained_variance_.round(2)
print(eig)
```

::: {.output .stream .stdout}
    [5.41 3.55 2.22 2.14 2.01 1.96 1.86 1.77 1.62 1.53 1.36 1.28 1.25 1.23
     1.2  1.19 1.14 1.12 1.08 1.03 1.02 1.01 0.97 0.96 0.93 0.92 0.87 0.86
     0.84 0.81 0.79 0.68 0.56 0.49 0.34 0.27 0.23 0.21 0.14 0.1  0.06 0.03
     0.02 0.01 0.   0.   0.   0.   0.  ]
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":736}" id="wpMFAR7QHwQu" outputId="066e1389-e6e8-46f1-f6c2-a049f32cff2c"}
``` python
# scree plot of eigenvalues
# define the x values, i.e., components
xvals = np.arange(IBM_Without_Attrition.shape[1]);
#figure size
plt.figure(figsize=(15,8))
#plot in red color
plt.plot(xvals, eig, 'ro-', linewidth=1)
#set ticks to every unit
plt.xticks(xvals)

#add labels...
plt.title('Scree Plot')
plt.xlabel('Principal Component')
plt.ylabel('Eigenvalue')

#add a horizontal line in blue for latent root criterion
plt.axhline(y=1, color='b', linestyle='--')
```

::: {.output .execute_result execution_count="21"}
    <matplotlib.lines.Line2D at 0x7f845cd74100>
:::

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/93c9ebce61cad0db9c1ba57e3ee05d2c992bf184.png)
:::
:::

::: {.cell .markdown id="ZclE6V27JRXU"}
**Scree Test**: keep 10 variables - at the second inflection point
:::

::: {.cell .markdown id="vtBjEoYJvg5m"}
## Rerun PCA on 10 Components
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":363}" id="j15C-VVmKAxt" outputId="f7c4f244-dcf8-4a0b-99d2-e2f2c15c064a"}
``` python
# Keeping the first 10 components based on scree test criterion
# fit() function runs the PCA and shows the % of var explained
# fit_transform() function runs the PCA and shows the actual PCA values (the components score)
pcs = PCA(n_components=10)
principalComponents = pcs.fit_transform(preprocessing.scale(IBM_Without_Attrition))

# make the output more readable by creating a new dataframe
principalDF = pd.DataFrame(
        data = principalComponents.round(2),
        columns = ['Career_Longevity','Business_Development_Units','Work-Life_Choices','OverTime','TravelSometimes','Gender','Family&Travel','Performance&Bonus', 'Medical&LifeScience', 'Divorce_or_married']
        )

# Naming F1 - F10
  # F1 = Career Longevity: Reflecting tenure, promotions, and time in roles.
  # F2 = Business_Development_Units: Indicating job position in sales, research and development departments.
  # F3 = Work-Life Choices: Representing overtime decisions and marital status.
  # F4 = OverTime: Highlighting if the employee is taking overtime or not.
  # F5 = TravelSometimes: Relating to the the variable if the employee traveled sometimes.
  # F6 = Gender: Relating to the work travel variable and gender
  # F7 = Family&Travel: Focusing on the travel and marital status.
  # F8 = Perfiemance&Bonus: Realating to PerformanceRating and PercentSalaryHike
  # F9 = Medical&LifeScience: Pointing to if the employee had education in Med school or Life science
  # F10 = Divorce_or_married: Focusing on whether the employee is divorced or married (besides single).
# confirm component scores are orthogonal (small correlations)
principalDF.corr().round(4)
```

::: {.output .execute_result execution_count="22"}
```{=html}

  <div id="df-665ffd60-895d-479d-85c3-cc5cb0d52a69" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Career_Longevity</th>
      <th>Business_Development_Units</th>
      <th>Work-Life_Choices</th>
      <th>OverTime</th>
      <th>TravelSometimes</th>
      <th>Gender</th>
      <th>Family&amp;Travel</th>
      <th>Performance&amp;Bonus</th>
      <th>Medical&amp;LifeScience</th>
      <th>Divorce_or_married</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Career_Longevity</th>
      <td>1.0000</td>
      <td>0.0001</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>-0.0000</td>
      <td>0.0001</td>
      <td>-0.0000</td>
      <td>0.0000</td>
    </tr>
    <tr>
      <th>Business_Development_Units</th>
      <td>0.0001</td>
      <td>1.0000</td>
      <td>-0.0000</td>
      <td>0.0000</td>
      <td>-0.0001</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>-0.0000</td>
      <td>0.0001</td>
      <td>-0.0000</td>
    </tr>
    <tr>
      <th>Work-Life_Choices</th>
      <td>0.0000</td>
      <td>-0.0000</td>
      <td>1.0000</td>
      <td>-0.0001</td>
      <td>-0.0000</td>
      <td>-0.0000</td>
      <td>-0.0001</td>
      <td>0.0001</td>
      <td>0.0000</td>
      <td>0.0001</td>
    </tr>
    <tr>
      <th>OverTime</th>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>-0.0001</td>
      <td>1.0000</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>-0.0000</td>
      <td>0.0000</td>
      <td>0.0001</td>
      <td>-0.0001</td>
    </tr>
    <tr>
      <th>TravelSometimes</th>
      <td>0.0000</td>
      <td>-0.0001</td>
      <td>-0.0000</td>
      <td>0.0000</td>
      <td>1.0000</td>
      <td>0.0001</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>-0.0002</td>
      <td>0.0000</td>
    </tr>
    <tr>
      <th>Gender</th>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>-0.0000</td>
      <td>0.0000</td>
      <td>0.0001</td>
      <td>1.0000</td>
      <td>-0.0000</td>
      <td>-0.0000</td>
      <td>-0.0001</td>
      <td>0.0000</td>
    </tr>
    <tr>
      <th>Family&amp;Travel</th>
      <td>-0.0000</td>
      <td>0.0000</td>
      <td>-0.0001</td>
      <td>-0.0000</td>
      <td>0.0000</td>
      <td>-0.0000</td>
      <td>1.0000</td>
      <td>0.0001</td>
      <td>0.0002</td>
      <td>0.0000</td>
    </tr>
    <tr>
      <th>Performance&amp;Bonus</th>
      <td>0.0001</td>
      <td>-0.0000</td>
      <td>0.0001</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>-0.0000</td>
      <td>0.0001</td>
      <td>1.0000</td>
      <td>0.0001</td>
      <td>0.0000</td>
    </tr>
    <tr>
      <th>Medical&amp;LifeScience</th>
      <td>-0.0000</td>
      <td>0.0001</td>
      <td>0.0000</td>
      <td>0.0001</td>
      <td>-0.0002</td>
      <td>-0.0001</td>
      <td>0.0002</td>
      <td>0.0001</td>
      <td>1.0000</td>
      <td>0.0000</td>
    </tr>
    <tr>
      <th>Divorce_or_married</th>
      <td>0.0000</td>
      <td>-0.0000</td>
      <td>0.0001</td>
      <td>-0.0001</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>1.0000</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-665ffd60-895d-479d-85c3-cc5cb0d52a69')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-665ffd60-895d-479d-85c3-cc5cb0d52a69 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-665ffd60-895d-479d-85c3-cc5cb0d52a69');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-92402595-cd74-46a6-9d56-5346a1097e86">
  <button class="colab-df-quickchart" onclick="quickchart('df-92402595-cd74-46a6-9d56-5346a1097e86')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-92402595-cd74-46a6-9d56-5346a1097e86 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>
```
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":836}" id="XSm-RVhiaJcd" outputId="a19c1b2d-6eb5-46de-d934-35b14d729b11"}
``` python
#New Principle Component graph with 10 super variables
var = list(IBM_Without_Attrition.columns)

plt.figure(figsize=(20,10))
sns.heatmap(np.absolute(pd.DataFrame(pcs.components_.transpose(), index=[var]).round(4)), annot=True, fmt=".1f", vmin=0.1, vmax=1, cmap="gray_r"); #only thing changed is the axis and grey scale
```

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/cdf666b7ab84995f7311c57d4c6caa2f754ceea8.png)
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":423}" id="LDKFN7_iKRyz" outputId="342a68b8-31f0-4c23-c05c-93e1fa67aafd"}
``` python
# merge component scores with the original dataframe (after missing values are dropped)
# we will use the concatenate, concat() function
IBM_Complete = pd.concat([IBM_Without_Attrition.dropna(subset=IBM_Without_Attrition.columns, how='any').reset_index(drop=True), principalDF], axis=1)
columns_to_keep = ['Career_Longevity','Business_Development_Units','Work-Life_Choices','OverTime','TravelSometimes','Gender','Family&Travel','Performance&Bonus', 'Medical&LifeScience', 'Divorce_or_married']
IBM_Complete = IBM_Complete[columns_to_keep]
IBM_Complete
```

::: {.output .execute_result execution_count="24"}
```{=html}

  <div id="df-2a975ac7-4b5a-4f74-95dc-6891f8827ae9" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Career_Longevity</th>
      <th>Business_Development_Units</th>
      <th>Work-Life_Choices</th>
      <th>OverTime</th>
      <th>TravelSometimes</th>
      <th>Gender</th>
      <th>Family&amp;Travel</th>
      <th>Performance&amp;Bonus</th>
      <th>Medical&amp;LifeScience</th>
      <th>Divorce_or_married</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.03</td>
      <td>2.21</td>
      <td>2.08</td>
      <td>2.51</td>
      <td>-1.05</td>
      <td>0.54</td>
      <td>0.21</td>
      <td>0.31</td>
      <td>-1.83</td>
      <td>0.47</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.14</td>
      <td>-1.32</td>
      <td>-0.27</td>
      <td>-1.51</td>
      <td>2.80</td>
      <td>0.58</td>
      <td>-0.31</td>
      <td>2.47</td>
      <td>-0.95</td>
      <td>-0.70</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-2.85</td>
      <td>-1.03</td>
      <td>0.45</td>
      <td>1.02</td>
      <td>-1.84</td>
      <td>2.23</td>
      <td>1.24</td>
      <td>0.64</td>
      <td>0.09</td>
      <td>-0.70</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-1.22</td>
      <td>-0.98</td>
      <td>1.63</td>
      <td>2.32</td>
      <td>2.16</td>
      <td>0.32</td>
      <td>0.81</td>
      <td>-1.38</td>
      <td>-1.80</td>
      <td>-1.29</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-2.02</td>
      <td>-1.10</td>
      <td>-1.83</td>
      <td>-0.93</td>
      <td>-1.47</td>
      <td>-0.82</td>
      <td>-0.33</td>
      <td>-0.49</td>
      <td>1.00</td>
      <td>-1.53</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1053</th>
      <td>0.63</td>
      <td>-1.69</td>
      <td>-1.11</td>
      <td>-0.90</td>
      <td>1.16</td>
      <td>1.02</td>
      <td>-2.69</td>
      <td>2.59</td>
      <td>-1.28</td>
      <td>0.24</td>
    </tr>
    <tr>
      <th>1054</th>
      <td>2.29</td>
      <td>-1.85</td>
      <td>-1.78</td>
      <td>-0.40</td>
      <td>-0.57</td>
      <td>-0.55</td>
      <td>0.73</td>
      <td>-0.20</td>
      <td>-0.56</td>
      <td>2.05</td>
    </tr>
    <tr>
      <th>1055</th>
      <td>3.61</td>
      <td>-1.89</td>
      <td>-1.83</td>
      <td>-0.96</td>
      <td>0.99</td>
      <td>-1.20</td>
      <td>3.14</td>
      <td>-0.55</td>
      <td>1.70</td>
      <td>0.77</td>
    </tr>
    <tr>
      <th>1056</th>
      <td>-2.13</td>
      <td>2.74</td>
      <td>-0.91</td>
      <td>-1.32</td>
      <td>0.48</td>
      <td>-1.12</td>
      <td>1.08</td>
      <td>-0.82</td>
      <td>-0.42</td>
      <td>-2.14</td>
    </tr>
    <tr>
      <th>1057</th>
      <td>-1.00</td>
      <td>2.90</td>
      <td>2.42</td>
      <td>-0.76</td>
      <td>0.14</td>
      <td>-1.64</td>
      <td>1.58</td>
      <td>-1.18</td>
      <td>-0.22</td>
      <td>-0.17</td>
    </tr>
  </tbody>
</table>
<p>1058 rows × 10 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-2a975ac7-4b5a-4f74-95dc-6891f8827ae9')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-2a975ac7-4b5a-4f74-95dc-6891f8827ae9 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-2a975ac7-4b5a-4f74-95dc-6891f8827ae9');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-70d114f2-1341-4878-8c0b-aaffb469b315">
  <button class="colab-df-quickchart" onclick="quickchart('df-70d114f2-1341-4878-8c0b-aaffb469b315')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-70d114f2-1341-4878-8c0b-aaffb469b315 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>
```
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":206}" id="QEgB-0jQVSxP" outputId="7f8b8a62-7471-416a-8665-5ac8a63d2629"}
``` python
IBM_Complete["Attrition"] = Attrition
IBM_Complete.head()
```

::: {.output .execute_result execution_count="25"}
```{=html}

  <div id="df-d8488dab-cdae-411f-867b-067ffc6eeb0e" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Career_Longevity</th>
      <th>Business_Development_Units</th>
      <th>Work-Life_Choices</th>
      <th>OverTime</th>
      <th>TravelSometimes</th>
      <th>Gender</th>
      <th>Family&amp;Travel</th>
      <th>Performance&amp;Bonus</th>
      <th>Medical&amp;LifeScience</th>
      <th>Divorce_or_married</th>
      <th>Attrition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.03</td>
      <td>2.21</td>
      <td>2.08</td>
      <td>2.51</td>
      <td>-1.05</td>
      <td>0.54</td>
      <td>0.21</td>
      <td>0.31</td>
      <td>-1.83</td>
      <td>0.47</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.14</td>
      <td>-1.32</td>
      <td>-0.27</td>
      <td>-1.51</td>
      <td>2.80</td>
      <td>0.58</td>
      <td>-0.31</td>
      <td>2.47</td>
      <td>-0.95</td>
      <td>-0.70</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-2.85</td>
      <td>-1.03</td>
      <td>0.45</td>
      <td>1.02</td>
      <td>-1.84</td>
      <td>2.23</td>
      <td>1.24</td>
      <td>0.64</td>
      <td>0.09</td>
      <td>-0.70</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-1.22</td>
      <td>-0.98</td>
      <td>1.63</td>
      <td>2.32</td>
      <td>2.16</td>
      <td>0.32</td>
      <td>0.81</td>
      <td>-1.38</td>
      <td>-1.80</td>
      <td>-1.29</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-2.02</td>
      <td>-1.10</td>
      <td>-1.83</td>
      <td>-0.93</td>
      <td>-1.47</td>
      <td>-0.82</td>
      <td>-0.33</td>
      <td>-0.49</td>
      <td>1.00</td>
      <td>-1.53</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-d8488dab-cdae-411f-867b-067ffc6eeb0e')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-d8488dab-cdae-411f-867b-067ffc6eeb0e button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-d8488dab-cdae-411f-867b-067ffc6eeb0e');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-4bd50bbd-bc75-425b-8f03-1af13447e043">
  <button class="colab-df-quickchart" onclick="quickchart('df-4bd50bbd-bc75-425b-8f03-1af13447e043')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-4bd50bbd-bc75-425b-8f03-1af13447e043 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>
```
:::
:::

::: {.cell .markdown id="g8zK87IZvwF_"}
## Train-Test-Split
:::

::: {.cell .code id="3VtJ4v-sF-Kk"}
``` python
# Split data

y = IBM_Complete["Attrition"]
X = IBM_Complete.drop("Attrition", axis=1)

X_train, X_test, y_train, y_test = train_test_split( X, y, test_size = 0.4, random_state = 42, stratify = y)
```
:::

::: {.cell .markdown id="uzVeNqYFmpUg"}
# All-Models
:::

::: {.cell .markdown id="km8WKdt7v0Kp"}
##Decision Tree
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":255}" id="6s2y0w14niQb" outputId="1d342e22-a530-4e95-e526-aa341e03abfe"}
``` python
# Training a full decision tree model
dt_model = DecisionTreeClassifier(random_state=42, max_depth=6)
dt_model.fit(X_train, y_train)
dt_predictions = dt_model.predict(X_test)
dt_accuracy = accuracy_score(y_test, dt_predictions)

#visualize the tree
from sklearn.tree import plot_tree
plt.figure(figsize=(20,10))
plot_tree(dt_model, filled=True, feature_names=X_train.columns, class_names=['No Attrition', 'Attrition'], max_depth=6)
plt.title('Decision Tree Visualization (Top Levels)')
plt.show()

dt_predictions = dt_model.predict(X_test)
dt_accuracy = accuracy_score(y_test, dt_predictions)

#confusion matrix for the tree
conf_matrix = confusion_matrix(y_test, dt_predictions)
sns.heatmap(conf_matrix, annot=True, fmt='d', cmap='Blues', xticklabels=['No Attrition', 'Attrition'], yticklabels=['No Attrition', 'Attrition'])
plt.ylabel('Actual')
plt.xlabel('Predicted')
plt.title('Confusion Matrix for Dt')
plt.show()

print(dt_accuracy)
```

::: {.output .error ename="NameError" evalue="ignored"}
    ---------------------------------------------------------------------------
    NameError                                 Traceback (most recent call last)
    <ipython-input-1-705912f1aae4> in <cell line: 2>()
          1 # Training a full decision tree model
    ----> 2 dt_model = DecisionTreeClassifier(random_state=42, max_depth=6)
          3 dt_model.fit(X_train, y_train)
          4 dt_predictions = dt_model.predict(X_test)
          5 dt_accuracy = accuracy_score(y_test, dt_predictions)

    NameError: name 'DecisionTreeClassifier' is not defined
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":1000}" id="BOXxl1_FGQpa" outputId="2686734f-2294-4f6c-ef40-fed3cff86914"}
``` python
# Training a pruned decision tree model
dt_model = DecisionTreeClassifier(random_state=42, max_depth=2)
dt_model.fit(X_train, y_train)
dt_predictions = dt_model.predict(X_test)
dt_accuracy = accuracy_score(y_test, dt_predictions)

#visualize the tree
from sklearn.tree import plot_tree
plt.figure(figsize=(20,10))
plot_tree(dt_model, filled=True, feature_names=X_train.columns, class_names=['No Attrition', 'Attrition'], max_depth=2)
plt.title('Pruned Decision Tree Visualization (Top Levels)')
plt.show()

dt_predictions = dt_model.predict(X_test)
dt_accuracy = accuracy_score(y_test, dt_predictions)

#confusion matrix for the tree
pruned_dt_conf_matrix = confusion_matrix(y_test, dt_predictions)
sns.heatmap(pruned_dt_conf_matrix, annot=True, fmt='d', cmap='Blues', xticklabels=['No Attrition', 'Attrition'], yticklabels=['No Attrition', 'Attrition'])
plt.ylabel('Actual')
plt.xlabel('Predicted')
plt.title('Confusion Matrix for Pruned Dt')
plt.show()

print(dt_accuracy)
```

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/c9289870800f7b62b2a0b504066af3f3e09b9003.png)
:::

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/8ce6e1ad2d753818381c24849145eeb1ec6f9883.png)
:::

::: {.output .stream .stdout}
    0.8301886792452831
:::
:::

::: {.cell .markdown id="pqvNjl4pv5aS"}
## Random Forest
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":490}" id="ut2dE2amk3Y6" outputId="0a992d31-ccfa-45a2-b29d-5646dafa9793"}
``` python
# Training a Random forest model
rf = RandomForestClassifier(
    n_estimators=10000,
    random_state=42,
    criterion='gini',
    n_jobs = -1)
rf.fit(X_train, y_train)
rf_predictions = rf.predict(X_test)
rf_accuracy = accuracy_score(y_test, rf_predictions)

print(accuracy_score(y_test, rf_predictions))

rf_conf_matrix = confusion_matrix(y_test, rf_predictions)
sns.heatmap(rf_conf_matrix, annot=True, fmt='d', cmap='Blues', xticklabels=['No Attrition', 'Attrition'], yticklabels=['No Attrition', 'Attrition'])
plt.ylabel('Actual')
plt.xlabel('Predicted')
plt.title('Confusion Matrix for RF')
plt.show()
```

::: {.output .stream .stdout}
    0.8278301886792453
:::

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/3dad17432a0a7eff6943f1b5f24887863f11179a.png)
:::
:::

::: {.cell .markdown id="9tu5wY7Tv8Gc"}
## KNN
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":1000}" id="aPDrN9M7HU4A" outputId="0fa8e0cb-11c4-497b-bf95-c820228a41fa"}
``` python
# Training an initial k-NN model
knn_model = KNeighborsClassifier(n_neighbors=1)
knn_model.fit(X_train, y_train)
knn_predictions = knn_model.predict(X_test)
knn_accuracy = accuracy_score(y_test, knn_predictions)

print(knn_accuracy)

from tqdm import tqdm
results = []
for k in tqdm(range(1, 51, 1)):
    knn = KNeighborsClassifier(n_neighbors=k).fit(X_train, y_train)

    # create a dictionary to store the results
    results.append({
        'k': k,
        'accuracy': accuracy_score(y_test, knn.predict(X_test))
    })

# convert results to a pandas dataframe for better visualization
print('\n')
print("accuracy of knn with different n")
results_df = pd.DataFrame(results)
results_df

```

::: {.output .stream .stdout}
    0.7971698113207547
:::

::: {.output .stream .stderr}
    100%|██████████| 50/50 [00:02<00:00, 19.00it/s]
:::

::: {.output .stream .stdout}


    accuracy of knn with different n
:::

::: {.output .stream .stderr}
:::

::: {.output .execute_result execution_count="30"}
```{=html}

  <div id="df-3c12ee26-23e3-414e-b475-fe17b7672908" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>k</th>
      <th>accuracy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0.797170</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>0.837264</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>0.832547</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>0.837264</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0.832547</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>0.851415</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>0.837264</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>0.841981</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>0.849057</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>0.844340</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>0.844340</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>0.841981</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>0.844340</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>0.844340</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>0.841981</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>0.839623</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>0.841981</td>
    </tr>
    <tr>
      <th>17</th>
      <td>18</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>18</th>
      <td>19</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>0.832547</td>
    </tr>
    <tr>
      <th>20</th>
      <td>21</td>
      <td>0.832547</td>
    </tr>
    <tr>
      <th>21</th>
      <td>22</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>22</th>
      <td>23</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>23</th>
      <td>24</td>
      <td>0.832547</td>
    </tr>
    <tr>
      <th>24</th>
      <td>25</td>
      <td>0.832547</td>
    </tr>
    <tr>
      <th>25</th>
      <td>26</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>26</th>
      <td>27</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>27</th>
      <td>28</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>28</th>
      <td>29</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>29</th>
      <td>30</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>30</th>
      <td>31</td>
      <td>0.832547</td>
    </tr>
    <tr>
      <th>31</th>
      <td>32</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>32</th>
      <td>33</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>33</th>
      <td>34</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>34</th>
      <td>35</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>35</th>
      <td>36</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>36</th>
      <td>37</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>37</th>
      <td>38</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>38</th>
      <td>39</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>39</th>
      <td>40</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>40</th>
      <td>41</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>41</th>
      <td>42</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>42</th>
      <td>43</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>43</th>
      <td>44</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>44</th>
      <td>45</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>45</th>
      <td>46</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>46</th>
      <td>47</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>47</th>
      <td>48</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>48</th>
      <td>49</td>
      <td>0.830189</td>
    </tr>
    <tr>
      <th>49</th>
      <td>50</td>
      <td>0.830189</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-3c12ee26-23e3-414e-b475-fe17b7672908')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-3c12ee26-23e3-414e-b475-fe17b7672908 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-3c12ee26-23e3-414e-b475-fe17b7672908');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-dc439856-5eba-4105-a2dc-c21ab811cbae">
  <button class="colab-df-quickchart" onclick="quickchart('df-dc439856-5eba-4105-a2dc-c21ab811cbae')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-dc439856-5eba-4105-a2dc-c21ab811cbae button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>
```
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":467}" id="Ww8YPuXgI3UW" outputId="74106208-4331-4959-cb7b-92799319bf16"}
``` python
# Find the max value and associated index
results_df.plot.scatter(x='k', y='accuracy', xlim=[0, 50]);
max_val = results_df['accuracy'].max()
max_val_idx = results_df['accuracy'].idxmax()

print("Max value =", max_val, '|', " Best k =", results_df['k'][max_val_idx])
```

::: {.output .stream .stdout}
    Max value = 0.8514150943396226 |  Best k = 6
:::

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/15e5bcc997a55a0ad80fc40b5893230c3bddc271.png)
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":490}" id="YW4i4ABLJnNA" outputId="814a432d-c198-4e30-b13a-d366c1dc0b71"}
``` python
#retrain the knn model with the max accuracy
knn_model = KNeighborsClassifier(n_neighbors=results_df['k'][max_val_idx])
knn_model.fit(X_train, y_train)
knn_predictions = knn_model.predict(X_test)
knn_accuracy = accuracy_score(y_test, knn_predictions)

print("knn accuracy:",knn_accuracy)

knn_conf_matrix = confusion_matrix(y_test, knn_predictions)
sns.heatmap(knn_conf_matrix, annot=True, fmt='d', cmap='Blues', xticklabels=['No Attrition', 'Attrition'], yticklabels=['No Attrition', 'Attrition'])
plt.ylabel('Actual')
plt.xlabel('Predicted')
plt.title('Confusion Matrix for Knn')
plt.show()
```

::: {.output .stream .stdout}
    knn accuracy: 0.8514150943396226
:::

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/9c4c5c5b692f33557016c3468268ce88fa5f0aec.png)
:::
:::

::: {.cell .markdown id="NpY3RK-dv_5T"}
## Logistic Regression
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="sqRiOUhj9ANm" outputId="fd5967b9-1fd1-4ab6-e3c8-26035609202a"}
``` python
# Training a logistic regression model

lr_model = LogisticRegression(penalty="none", solver='lbfgs', random_state=42)
lr_model.fit(X_train, y_train)
lr_predictions = lr_model.predict(X_test)
```

::: {.output .stream .stderr}
    /usr/local/lib/python3.10/dist-packages/sklearn/linear_model/_logistic.py:1173: FutureWarning: `penalty='none'`has been deprecated in 1.2 and will be removed in 1.4. To keep the past behaviour, set `penalty=None`.
      warnings.warn(
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":490}" id="OJro4xWbXwoZ" outputId="c467aa3e-58b0-4e22-d5c2-4b397d32fd9c"}
``` python
# # accuracy score
lr_accuracy = accuracy_score(y_test, lr_predictions)
print(accuracy_score(y_test, lr_predictions))

# Confusion model of logistic regression model
lr_confusion_matrix = confusion_matrix(y_test,lr_predictions)
sns.heatmap(lr_confusion_matrix, annot=True, fmt='d', cmap='Blues', xticklabels=['No Attrition', 'Attrition'], yticklabels=['No Attrition', 'Attrition'])
plt.ylabel('Actual')
plt.xlabel('Predicted')
plt.title('Confusion Matrix for logistic regression')
plt.show()
```

::: {.output .stream .stdout}
    0.8301886792452831
:::

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/fba7ab5f65ab7f5f1c4e47591c1aad2634f1ad6c.png)
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="z_Hq06INxvW9" outputId="6c18e805-ea34-4d49-8033-49273bbdad0c"}
``` python
# Store coefficients
lr_int = lr_model.intercept_[0]
lr_coef = lr_model.coef_[0]

# print coefficients
print('intercept ', lr_int)
print(pd.DataFrame({'coeff': lr_coef}, index=X.columns))
```

::: {.output .stream .stdout}
    intercept  -2.020277361022899
                                   coeff
    Career_Longevity           -0.371455
    Business_Development_Units  0.162925
    Work-Life_Choices           0.241972
    OverTime                    0.324084
    TravelSometimes             0.036738
    Gender                      0.357199
    Family&Travel               0.156100
    Performance&Bonus           0.010227
    Medical&LifeScience        -0.029872
    Divorce_or_married         -0.185719
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="LS0UIVSt6gK7" outputId="42823470-0bee-4e85-f8c5-dce16db65dd9"}
``` python
# print exponentiated coefficients
print( math.exp(lr_coef[0]) )
print( math.exp(lr_coef[1]) )
print( math.exp(lr_coef[2]) )
print( math.exp(lr_coef[3]) )
print( math.exp(lr_coef[4]) )
print( math.exp(lr_coef[5]) )
print( math.exp(lr_coef[6]) )
print( math.exp(lr_coef[7]) )
print( math.exp(lr_coef[8]) )
print( math.exp(lr_coef[9]) )
```

::: {.output .stream .stdout}
    0.6897303288764768
    1.1769486221975103
    1.2737582400244785
    1.3827634929696477
    1.0374207739535113
    1.429319856304934
    1.168942803852614
    1.0102793183766778
    0.970569529928433
    0.8305067230623852
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="tiD2dfqIyMew" outputId="c353cede-c621-444c-cf40-e58fd0eeecc9"}
``` python
#logistic regresssion summary stats
X_train_with_constant = sm.add_constant(X_train)
X_test_with_constant = sm.add_constant(X_test)

logit_reg = sm.Logit(y_train, X_train_with_constant).fit()
print(logit_reg.params)
print(logit_reg.summary())
```

::: {.output .stream .stdout}
    Optimization terminated successfully.
             Current function value: 0.373517
             Iterations 7
    const                        -2.020276
    Career_Longevity             -0.371454
    Business_Development_Units    0.162925
    Work-Life_Choices             0.241972
    OverTime                      0.324084
    TravelSometimes               0.036740
    Gender                        0.357200
    Family&Travel                 0.156096
    Performance&Bonus             0.010224
    Medical&LifeScience          -0.029873
    Divorce_or_married           -0.185720
    dtype: float64
                               Logit Regression Results                           
    ==============================================================================
    Dep. Variable:              Attrition   No. Observations:                  634
    Model:                          Logit   Df Residuals:                      623
    Method:                           MLE   Df Model:                           10
    Date:                Thu, 30 Nov 2023   Pseudo R-squ.:                  0.1771
    Time:                        02:17:48   Log-Likelihood:                -236.81
    converged:                       True   LL-Null:                       -287.79
    Covariance Type:            nonrobust   LLR p-value:                 2.203e-17
    ==============================================================================================
                                     coef    std err          z      P>|z|      [0.025      0.975]
    ----------------------------------------------------------------------------------------------
    const                         -2.0203      0.145    -13.933      0.000      -2.304      -1.736
    Career_Longevity              -0.3715      0.067     -5.570      0.000      -0.502      -0.241
    Business_Development_Units     0.1629      0.060      2.719      0.007       0.045       0.280
    Work-Life_Choices              0.2420      0.081      3.000      0.003       0.084       0.400
    OverTime                       0.3241      0.075      4.339      0.000       0.178       0.470
    TravelSometimes                0.0367      0.088      0.417      0.677      -0.136       0.210
    Gender                         0.3572      0.085      4.226      0.000       0.192       0.523
    Family&Travel                  0.1561      0.092      1.692      0.091      -0.025       0.337
    Performance&Bonus              0.0102      0.090      0.113      0.910      -0.167       0.188
    Medical&LifeScience           -0.0299      0.094     -0.319      0.750      -0.214       0.154
    Divorce_or_married            -0.1857      0.109     -1.703      0.089      -0.400       0.028
    ==============================================================================================
:::
:::

::: {.cell .markdown id="ZlnNAKQEwC3g"}
## Naive Bayes
:::

::: {.cell .code id="k-w0vjf39CAg"}
``` python
# Training a Naive Bayes model
nb_model = GaussianNB()
nb_model.fit(X_train, y_train)
nb_predictions = nb_model.predict(X_test)
```
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":490}" id="PtBw60nrYAme" outputId="9761d5a8-0467-407d-a90c-0f0d37256b39"}
``` python
# # accuracy score
nb_accuracy = accuracy_score(y_test, nb_predictions)
print(accuracy_score(y_test, nb_predictions))

# Confusion model of Navie Bayes model
NB_confusion_matrix = confusion_matrix(y_test,nb_predictions)
sns.heatmap(NB_confusion_matrix, annot=True, fmt='d', cmap='Blues', xticklabels=['No Attrition', 'Attrition'], yticklabels=['No Attrition', 'Attrition'])
plt.ylabel('Actual')
plt.xlabel('Predicted')
plt.title('Confusion Matrix for Naive Bayes')
plt.show()
```

::: {.output .stream .stdout}
    0.8325471698113207
:::

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/332fc42fdbdb687f30d3b3df5e1df90c3bc531e1.png)
:::
:::

::: {.cell .markdown id="fjRXb4fvwFc-"}
## Neural Network
:::

::: {.cell .code id="K0lyKpmC9DW6"}
``` python
# Training a neural network model
nn_model = MLPClassifier(hidden_layer_sizes=(2), activation='logistic', solver='lbfgs', random_state=42)
nn_model.fit(X_train, y_train)
nn_predictions = nn_model.predict(X_test)

nn_accuracy = accuracy_score(y_test, nn_predictions)
```
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":490}" id="meGyAMB7Y03c" outputId="17f79246-a50a-417b-f93d-a38ef0c12370"}
``` python
# # accuracy score of the neural network model
print("NN accuracy",accuracy_score(y_test, nn_predictions))

# plot predicted vs actual values
pd.DataFrame({'actual': y_test, 'predicted': nn_predictions}).plot.scatter(x='actual', y='predicted', alpha=0.5)
plt.plot([5000, 30000], [5000, 30000], color='C1');

# Confusion model of neural network model
NN_confusion_matrix = confusion_matrix(y_test,nn_predictions)
sns.heatmap(NN_confusion_matrix, annot=True, fmt='d', cmap='Blues', xticklabels=['No Attrition', 'Attrition'], yticklabels=['No Attrition', 'Attrition'])
plt.ylabel('Actual')
plt.xlabel('Predicted')
plt.title('Confusion Matrix for Neural Network')
plt.show()
```

::: {.output .stream .stdout}
    NN accuracy 0.8136792452830188
:::

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/9a1b73dbb80bf5535dc85381c9920ae475b37b3d.png)
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":449}" id="g4-BpYy5gOtE" outputId="bd0b7699-c925-4be7-bd1c-f42f9f34be05"}
``` python
# plot predicted vs actual values
pd.DataFrame({'actual': y_test, 'predicted': nn_predictions}).plot.scatter(x='actual', y='predicted', alpha=0.5)
plt.plot([0, 1], [0, 1], color='C1');
```

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/a00453110f49d0b582122cd740fe9b69058aa7ad.png)
:::
:::

::: {.cell .markdown id="oKzaOfe3wJKd"}
## Summary of All Models
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":609}" id="gnfpUQ7h9FWE" outputId="fb5a4955-8c08-4c15-8fcb-be1c7c928b0e"}
``` python
# Accuracies of all models
accuracies = {
    'Decision Tree': dt_accuracy,
    'Logistic Regression': lr_accuracy,
    'k-NN': knn_accuracy,
    'Naive Bayes': nb_accuracy,
    'Neural Network': nn_accuracy,
    'Random Forest': rf_accuracy
}

# Plotting the accuracies
plt.bar(range(len(accuracies)), list(accuracies.values()), align='center')
plt.xticks(range(len(accuracies)), list(accuracies.keys()), rotation='vertical')
plt.ylabel('Accuracy')
plt.title('Model Accuracies')
plt.show()

print(accuracies)
```

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/d2a2096922c3e62a53f4b6058c18999ad51aaf54.png)
:::

::: {.output .stream .stdout}
    {'Decision Tree': 0.8301886792452831, 'Logistic Regression': 0.8301886792452831, 'k-NN': 0.8514150943396226, 'Naive Bayes': 0.8325471698113207, 'Neural Network': 0.8136792452830188, 'Random Forest': 0.8278301886792453}
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":757}" id="m5h9soWwetHC" outputId="ffbd26f0-f9c2-4fb6-f68b-d625224de510"}
``` python
#MODEL ACCURACY IN ACENDING ORDER

# Accuracies of all models
accuracies = {
    'Decision Tree': dt_accuracy,
    'Logistic Regression': lr_accuracy,
    'k-NN': knn_accuracy,
    'Naive Bayes': nb_accuracy,
    'Neural Network': nn_accuracy,
    'Random Forest': rf_accuracy
}

# Sort the models based on accuracy (worst to best)
sorted_accuracies = sorted(accuracies.items(), key=lambda x: x[1])

# Plotting the accuracies
plt.bar(range(len(sorted_accuracies)), [acc for _, acc in sorted_accuracies], align='center')
plt.xticks(range(len(sorted_accuracies)), [model for model, _ in sorted_accuracies], rotation='vertical')
plt.ylabel('Accuracy')
plt.title('Model Accuracies (Worst to Best)')
plt.show()

# Print the ranked accuracies
print("Ranked Accuracies (Worst to Best):")
for rank, (model, accuracy) in enumerate(sorted_accuracies, start=1):
    print(f"{rank}. {model}: {accuracy}")

print("Original Accuracies:")
print(accuracies)
```

::: {.output .display_data}
![](vertopal_84bc4da1e04d4626bb687de4396931c8/5a168cc57baf1fd3047dd213c62ea96c0311e4ec.png)
:::

::: {.output .stream .stdout}
    Ranked Accuracies (Worst to Best):
    1. Neural Network: 0.8136792452830188
    2. Random Forest: 0.8278301886792453
    3. Decision Tree: 0.8301886792452831
    4. Logistic Regression: 0.8301886792452831
    5. Naive Bayes: 0.8325471698113207
    6. k-NN: 0.8514150943396226
    Original Accuracies:
    {'Decision Tree': 0.8301886792452831, 'Logistic Regression': 0.8301886792452831, 'k-NN': 0.8514150943396226, 'Naive Bayes': 0.8325471698113207, 'Neural Network': 0.8136792452830188, 'Random Forest': 0.8278301886792453}
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="T800zxV1q3JZ" outputId="75a4795b-d5f8-4bbc-f9bc-0d8218f1e66b"}
``` python
# NN_confusion_matrix is in the format: [[TN, FP], [FN, TP]]
print("--NN_Stats--")
TN, FP, FN, TP = NN_confusion_matrix.ravel()

# Calculate True Positive Rate (TPR)
TPR = TP / (TP + FN)

# Calculate True Negative Rate (TNR)
TNR = TN / (TN + FP)

# Calculate False Positive Rate (FPR)
FPR = FP / (FP + TN)

# Print the rates
print("True Positive Rate (TPR):", TPR)
print("True Negative Rate (TNR):", TNR)
print("False Positive Rate (FPR):", FPR)
#______________________________________________________________________
# NB_confusion_matrix is in the format: [[TN, FP], [FN, TP]]
TN1, FP1, FN1, TP1 = NB_confusion_matrix.ravel()

# Calculate True Positive Rate (TPR)
TPR1 = TP1 / (TP1 + FN1)

# Calculate True Negative Rate (TNR)
TNR1 = TN1 / (TN1 + FP1)

# Calculate False Positive Rate (FPR)
FPR1 = FP1 / (FP1 + TN1)

# Print the rates
print("--NB_Stats--")
print("True Positive Rate (TPR):", TPR1)
print("True Negative Rate (TNR):", TNR1)
print("False Positive Rate (FPR):", FPR1)
#______________________________________________________________________
# lr_confusion_matrix is in the format: [[TN, FP], [FN, TP]]
TN2, FP2, FN2, TP2 = lr_confusion_matrix.ravel()

# Calculate True Positive Rate (TPR)
TPR2 = TP2 / (TP2 + FN2)

# Calculate True Negative Rate (TNR)
TNR2 = TN2 / (TN2 + FP2)

# Calculate False Positive Rate (FPR)
FPR2 = FP2 / (FP2 + TN2)

# Print the rates
print("--LR_Stats--")
print("True Positive Rate (TPR):", TPR2)
print("True Negative Rate (TNR):", TNR2)
print("False Positive Rate (FPR):", FPR2)
#______________________________________________________________________
# knn_confusion_matrix is in the format: [[TN, FP], [FN, TP]]
TN3, FP3, FN3, TP3 = knn_conf_matrix.ravel()

# Calculate True Positive Rate (TPR)
TPR3 = TP3 / (TP3 + FN3)

# Calculate True Negative Rate (TNR)
TNR3 = TN3 / (TN3 + FP3)

# Calculate False Positive Rate (FPR)
FPR3 = FP3 / (FP3 + TN3)

# Print the rates
print("--knn_Stats--")
print("True Positive Rate (TPR):", TPR3)
print("True Negative Rate (TNR):", TNR3)
print("False Positive Rate (FPR):", FPR3)
#______________________________________________________________________
# rf_confusion_matrix is in the format: [[TN, FP], [FN, TP]]
TN4, FP4, FN4, TP4 = rf_conf_matrix.ravel()

# Calculate True Positive Rate (TPR)
TPR4 = TP4 / (TP4 + FN4)

# Calculate True Negative Rate (TNR)
TNR4 = TN4 / (TN4 + FP4)

# Calculate False Positive Rate (FPR)
FPR4 = FP4 / (FP4 + TN4)

# Print the rates
print("--rf_Stats--")
print("True Positive Rate (TPR):", TPR4)
print("True Negative Rate (TNR):", TNR4)
print("False Positive Rate (FPR):", FPR4)
#______________________________________________________________________
# pruned_dt_conf_matrix is in the format: [[TN, FP], [FN, TP]]
TN5, FP5, FN5, TP5 = pruned_dt_conf_matrix.ravel()

# Calculate True Positive Rate (TPR)
TPR5 = TP5 / (TP5 + FN5)

# Calculate True Negative Rate (TNR)
TNR5 = TN5 / (TN5 + FP5)

# Calculate False Positive Rate (FPR)
FPR5 = FP5 / (FP5 + TN5)

# Print the rates
print("--pruned_dt_Stats--")
print("True Positive Rate (TPR):", TPR5)
print("True Negative Rate (TNR):", TNR5)
print("False Positive Rate (FPR):", FPR5)
```

::: {.output .stream .stdout}
    --NN_Stats--
    True Positive Rate (TPR): 0.2638888888888889
    True Negative Rate (TNR): 0.9261363636363636
    False Positive Rate (FPR): 0.07386363636363637
    --NB_Stats--
    True Positive Rate (TPR): 0.16666666666666666
    True Negative Rate (TNR): 0.96875
    False Positive Rate (FPR): 0.03125
    --LR_Stats--
    True Positive Rate (TPR): 0.18055555555555555
    True Negative Rate (TNR): 0.9630681818181818
    False Positive Rate (FPR): 0.036931818181818184
    --knn_Stats--
    True Positive Rate (TPR): 0.1388888888888889
    True Negative Rate (TNR): 0.9971590909090909
    False Positive Rate (FPR): 0.002840909090909091
    --rf_Stats--
    True Positive Rate (TPR): 0.19444444444444445
    True Negative Rate (TNR): 0.9573863636363636
    False Positive Rate (FPR): 0.04261363636363636
    --pruned_dt_Stats--
    True Positive Rate (TPR): 0.06944444444444445
    True Negative Rate (TNR): 0.9857954545454546
    False Positive Rate (FPR): 0.014204545454545454
:::
:::

::: {.cell .markdown id="5x238q6AwOO4"}
## Out-of-Sample Testing
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":147}" id="VLGd4I3m-Sgu" outputId="f26c9525-c928-48a6-86fa-3ec3345ecae7"}
``` python
#test with a new employee data
# define a new employee
newEmployee = pd.DataFrame([
{
 'Age':24,
 'Attrition':1,
 'BusinessTravel':'Travel_Rarely',
 'DailyRate':1104,
 'Department':'Human Resources',
 'DistanceFromHome':1,
 'Education':3,
 'EducationField':'Human Resources',
 'EmployeeCount':1,
 'EmployeeNumber':222,
 'EnvironmentSatisfaction':3,
 'Gender':'Male',
 'HourlyRate':94,
 'JobInvolvement':3,
 'JobLevel':2,
 'JobRole':'Human Resources',
 'JobSatisfaction':3,
 'MaritalStatus':'Single',
 'MonthlyIncome':6969,
 'MonthlyRate':19696,
 'NumCompaniesWorked':1,
 'Over18':'Y',
 'OverTime':'Yes',
 'PercentSalaryHike':11,
 'PerformanceRating':3,
 'RelationshipSatisfaction':1,
 'StandardHours':80,
 'StockOptionLevel':0,
 'TotalWorkingYears':5,
 'TrainingTimesLastYear':0,
 'WorkLifeBalance':1,
 'YearsAtCompany':3,
 'YearsInCurrentRole':3,
 'YearsSinceLastPromotion':0,
 'YearsWithCurrManager':3
 }
 ])
newEmployee
```

::: {.output .execute_result execution_count="46"}
```{=html}

  <div id="df-8317f046-ddb7-4747-8bed-521954b5df7e" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Attrition</th>
      <th>BusinessTravel</th>
      <th>DailyRate</th>
      <th>Department</th>
      <th>DistanceFromHome</th>
      <th>Education</th>
      <th>EducationField</th>
      <th>EmployeeCount</th>
      <th>EmployeeNumber</th>
      <th>...</th>
      <th>RelationshipSatisfaction</th>
      <th>StandardHours</th>
      <th>StockOptionLevel</th>
      <th>TotalWorkingYears</th>
      <th>TrainingTimesLastYear</th>
      <th>WorkLifeBalance</th>
      <th>YearsAtCompany</th>
      <th>YearsInCurrentRole</th>
      <th>YearsSinceLastPromotion</th>
      <th>YearsWithCurrManager</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>24</td>
      <td>1</td>
      <td>Travel_Rarely</td>
      <td>1104</td>
      <td>Human Resources</td>
      <td>1</td>
      <td>3</td>
      <td>Human Resources</td>
      <td>1</td>
      <td>222</td>
      <td>...</td>
      <td>1</td>
      <td>80</td>
      <td>0</td>
      <td>5</td>
      <td>0</td>
      <td>1</td>
      <td>3</td>
      <td>3</td>
      <td>0</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 35 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-8317f046-ddb7-4747-8bed-521954b5df7e')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-8317f046-ddb7-4747-8bed-521954b5df7e button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-8317f046-ddb7-4747-8bed-521954b5df7e');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>

    </div>
  </div>
```
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":147}" id="HtdVGV7ovvaP" outputId="85cdd9cc-f090-4cff-c613-ee47bf121922"}
``` python
#pre-process test sample
dummies_1BT = pd.get_dummies(newEmployee['BusinessTravel'],drop_first=False)
dummies_1DP = pd.get_dummies(newEmployee['Department'],drop_first=False)
dummies_1EF = pd.get_dummies(newEmployee['EducationField'],drop_first=False)
dummies_1EF = dummies_EF.rename(columns={'Other': 'EF_Other'})
dummies_1JR = pd.get_dummies(newEmployee['JobRole'],drop_first=False)
dummies_1OT = pd.get_dummies(newEmployee['OverTime'],drop_first=False)
dummies_1OT = dummies_OT.rename(columns={'Yes': 'OT_Yes', 'No': 'OT_No'})
dummies_1MS = pd.get_dummies(newEmployee['MaritalStatus'],drop_first=False)

newEmployee[dummies_1BT.columns] = dummies_1BT
newEmployee[dummies_1DP.columns] = dummies_1DP
newEmployee[dummies_1EF.columns] = dummies_1EF
newEmployee[dummies_1JR.columns] = dummies_1JR
newEmployee[dummies_1OT.columns] = dummies_1OT
newEmployee[dummies_1MS.columns] = dummies_1MS

# We are going to drop these coloumns because we are going to create dummy variables for them
Columns_Drop = ['BusinessTravel','Department','Gender','EducationField','JobRole','OverTime','Over18','OverTime','MaritalStatus','StandardHours','EmployeeCount','EmployeeNumber']
newEmployee = newEmployee.drop(columns=Columns_Drop)
newEmployee.head()
```

::: {.output .execute_result execution_count="47"}
```{=html}

  <div id="df-35a104d3-1ef6-4d5c-8358-5ca30139cecc" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Attrition</th>
      <th>DailyRate</th>
      <th>DistanceFromHome</th>
      <th>Education</th>
      <th>EnvironmentSatisfaction</th>
      <th>HourlyRate</th>
      <th>JobInvolvement</th>
      <th>JobLevel</th>
      <th>JobSatisfaction</th>
      <th>...</th>
      <th>Travel_Rarely</th>
      <th>Human Resources</th>
      <th>Life Sciences</th>
      <th>Marketing</th>
      <th>Medical</th>
      <th>EF_Other</th>
      <th>Technical Degree</th>
      <th>OT_No</th>
      <th>OT_Yes</th>
      <th>Single</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>24</td>
      <td>1</td>
      <td>1104</td>
      <td>1</td>
      <td>3</td>
      <td>3</td>
      <td>94</td>
      <td>3</td>
      <td>2</td>
      <td>3</td>
      <td>...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 34 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-35a104d3-1ef6-4d5c-8358-5ca30139cecc')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-35a104d3-1ef6-4d5c-8358-5ca30139cecc button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-35a104d3-1ef6-4d5c-8358-5ca30139cecc');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>

    </div>
  </div>
```
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\"}" id="uHn-EDLQmh3P" outputId="d8d3704b-2a5a-4d41-83c1-600583a62ed1"}
``` python
newEmployee.info()
```

::: {.output .stream .stdout}
    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 1 entries, 0 to 0
    Data columns (total 34 columns):
     #   Column                    Non-Null Count  Dtype
    ---  ------                    --------------  -----
     0   Age                       1 non-null      int64
     1   Attrition                 1 non-null      int64
     2   DailyRate                 1 non-null      int64
     3   DistanceFromHome          1 non-null      int64
     4   Education                 1 non-null      int64
     5   EnvironmentSatisfaction   1 non-null      int64
     6   HourlyRate                1 non-null      int64
     7   JobInvolvement            1 non-null      int64
     8   JobLevel                  1 non-null      int64
     9   JobSatisfaction           1 non-null      int64
     10  MonthlyIncome             1 non-null      int64
     11  MonthlyRate               1 non-null      int64
     12  NumCompaniesWorked        1 non-null      int64
     13  PercentSalaryHike         1 non-null      int64
     14  PerformanceRating         1 non-null      int64
     15  RelationshipSatisfaction  1 non-null      int64
     16  StockOptionLevel          1 non-null      int64
     17  TotalWorkingYears         1 non-null      int64
     18  TrainingTimesLastYear     1 non-null      int64
     19  WorkLifeBalance           1 non-null      int64
     20  YearsAtCompany            1 non-null      int64
     21  YearsInCurrentRole        1 non-null      int64
     22  YearsSinceLastPromotion   1 non-null      int64
     23  YearsWithCurrManager      1 non-null      int64
     24  Travel_Rarely             1 non-null      uint8
     25  Human Resources           1 non-null      uint8
     26  Life Sciences             1 non-null      uint8
     27  Marketing                 1 non-null      uint8
     28  Medical                   1 non-null      uint8
     29  EF_Other                  1 non-null      uint8
     30  Technical Degree          1 non-null      uint8
     31  OT_No                     1 non-null      uint8
     32  OT_Yes                    1 non-null      uint8
     33  Single                    1 non-null      uint8
    dtypes: int64(24), uint8(10)
    memory usage: 330.0 bytes
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":147}" id="C0MB-hREAbLN" outputId="9705a5a0-3355-4502-ccdf-bdb911c80456"}
``` python
Attrition_new = newEmployee["Attrition"]
newEmployee_withoutAttrition = newEmployee.drop(["Attrition"], axis=1)
newEmployee_withoutAttrition.head(5)
```

::: {.output .execute_result execution_count="49"}
```{=html}

  <div id="df-c55f627d-ba0f-4199-8bc2-2d3f35b1c069" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>DailyRate</th>
      <th>DistanceFromHome</th>
      <th>Education</th>
      <th>EnvironmentSatisfaction</th>
      <th>HourlyRate</th>
      <th>JobInvolvement</th>
      <th>JobLevel</th>
      <th>JobSatisfaction</th>
      <th>MonthlyIncome</th>
      <th>...</th>
      <th>Travel_Rarely</th>
      <th>Human Resources</th>
      <th>Life Sciences</th>
      <th>Marketing</th>
      <th>Medical</th>
      <th>EF_Other</th>
      <th>Technical Degree</th>
      <th>OT_No</th>
      <th>OT_Yes</th>
      <th>Single</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>24</td>
      <td>1104</td>
      <td>1</td>
      <td>3</td>
      <td>3</td>
      <td>94</td>
      <td>3</td>
      <td>2</td>
      <td>3</td>
      <td>6969</td>
      <td>...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 33 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-c55f627d-ba0f-4199-8bc2-2d3f35b1c069')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-c55f627d-ba0f-4199-8bc2-2d3f35b1c069 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-c55f627d-ba0f-4199-8bc2-2d3f35b1c069');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>

    </div>
  </div>
```
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":117}" id="4ch7dapdpLBd" outputId="7afa49ab-bd10-4959-d65f-9651600dc7e2"}
``` python
# Scaling Standardization (0 mean, unit variance) is done via the sklearn.preprocessing scale() function

pcs1 = PCA()
pcs1.fit(preprocessing.scale(newEmployee_withoutAttrition))

# view the importance of principal components
pcs1Summary_df1 = pd.DataFrame({
            'Proportion of variance': pcs1.explained_variance_ratio_,
            'Cumulative proportion': np.cumsum(pcs1.explained_variance_ratio_)
            })
pcs1Summary_df1.round(3)
```

::: {.output .stream .stderr}
    /usr/local/lib/python3.10/dist-packages/sklearn/decomposition/_pca.py:543: RuntimeWarning: invalid value encountered in divide
      explained_variance_ = (S**2) / (n_samples - 1)
:::

::: {.output .execute_result execution_count="50"}
```{=html}

  <div id="df-2ba88a61-9a2e-45c5-9407-69a7e9a69c33" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Proportion of variance</th>
      <th>Cumulative proportion</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-2ba88a61-9a2e-45c5-9407-69a7e9a69c33')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-2ba88a61-9a2e-45c5-9407-69a7e9a69c33 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-2ba88a61-9a2e-45c5-9407-69a7e9a69c33');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>

    </div>
  </div>
```
:::
:::

::: {.cell .code colab="{\"base_uri\":\"https://localhost:8080/\",\"height\":666}" id="fGZfkrbSbs-Q" outputId="20dfb3a1-c5dc-44c7-ab89-46876efbf48d"}
``` python
knn.predict(newEmployee)
lr.predict(newEmployee)
nb.predict(newEmployee)
nn.predict(newEmployee)
rf.predict(newEmployee)
```

::: {.output .error ename="ValueError" evalue="ignored"}
    ---------------------------------------------------------------------------
    ValueError                                Traceback (most recent call last)
    <ipython-input-51-4b2e9632a428> in <cell line: 1>()
    ----> 1 knn.predict(newEmployee)
          2 lr.predict(newEmployee)
          3 nb.predict(newEmployee)
          4 nn.predict(newEmployee)
          5 rf.predict(newEmployee)

    /usr/local/lib/python3.10/dist-packages/sklearn/neighbors/_classification.py in predict(self, X)
        232             # In that case, we do not need the distances to perform
        233             # the weighting so we do not compute them.
    --> 234             neigh_ind = self.kneighbors(X, return_distance=False)
        235             neigh_dist = None
        236         else:

    /usr/local/lib/python3.10/dist-packages/sklearn/neighbors/_base.py in kneighbors(self, X, n_neighbors, return_distance)
        804                 X = _check_precomputed(X)
        805             else:
    --> 806                 X = self._validate_data(X, accept_sparse="csr", reset=False, order="C")
        807 
        808         n_samples_fit = self.n_samples_fit_

    /usr/local/lib/python3.10/dist-packages/sklearn/base.py in _validate_data(self, X, y, reset, validate_separately, **check_params)
        546             validated.
        547         """
    --> 548         self._check_feature_names(X, reset=reset)
        549 
        550         if y is None and self._get_tags()["requires_y"]:

    /usr/local/lib/python3.10/dist-packages/sklearn/base.py in _check_feature_names(self, X, reset)
        479                 )
        480 
    --> 481             raise ValueError(message)
        482 
        483     def _validate_data(

    ValueError: The feature names should match those that were passed during fit.
    Feature names unseen at fit time:
    - Age
    - Attrition
    - DailyRate
    - DistanceFromHome
    - EF_Other
    - ...
    Feature names seen at fit time, yet now missing:
    - Business_Development_Units
    - Career_Longevity
    - Divorce_or_married
    - Family&Travel
    - Gender
    - ...
:::
:::
